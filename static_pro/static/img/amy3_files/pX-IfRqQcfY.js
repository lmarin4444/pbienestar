if (self.CavalryLogger) { CavalryLogger.start_js(["OHp5g"]); }

__d("OzConstants",[],(function a(b,c,d,e,f,g){f.exports={AUTHOR_TYPES:{BOT:"bot",TRAINER:"trainer",USER:"user"},ATTS:{COMMAND:"@COMMAND",IMAGE:"image",SUGG:"@SUGG",TEMPLATE:"template",SURVEY:"survey",QUICK_REPLIES:"@QUICK_REPLIES",OPENTABLEQR:"opentableQuickReply"},SESSION_INFO_EVENT:"iframenonce_fb_session_info",TOKENS:{USER_FIRST_NAME:"user-first-name"},REMINDERS:{RANGE_IN_YEARS:5},M_FBIDS:{M:"881263441913087",M_DEV:"1579802578966277",P:"506060876211905"}}}),null);
__d("AdsDayPartingInterval",["DateConsts"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){this.start_minute=i*c("DateConsts").MIN_PER_HOUR;this.end_minute=j*c("DateConsts").MIN_PER_HOUR}f.exports=h}),null);
__d("DayPartingGrid",["AdsApiScheduleObjectFields","AdsApiScheduleObjectPaths","AdsApiScheduleObjectRecord","AdsDayPartingInterval","DayPartingUtils","getByPath"],(function a(b,c,d,e,f,g){"use strict";var h=c("DayPartingUtils").DAYS_IN_WEEK,i=c("DayPartingUtils").HOURS_IN_DAY;function j(k){if(k){this.hours=new Array(h);for(var l=0;l<h;l++)this.hours[l]=k.hours[l].slice();this.everyDay=k.everyDay.slice();this.allDay=k.allDay.slice()}else{this.hours=this.$DayPartingGrid1();this.allDay=c("DayPartingUtils").createArray(h,function(){return false});this.everyDay=c("DayPartingUtils").createArray(i,function(){return false})}}j.prototype.set=function(k,l,m,n,o){var p;if(m<k){p=k;k=m;m=p}if(n<l){p=l;l=n;n=p}for(var q=k;q<=m;q++){for(var r=l;r<=n;r++)this.hours[q][r]=o;this.$DayPartingGrid2(q)}for(r=l;r<=n;r++)this.$DayPartingGrid3(r)};j.prototype.setEveryDay=function(k,l,m){if(l<k){var n=k;k=l;l=n}this.set(0,k,h-1,l,m)};j.prototype.setAllDay=function(k,l,m){if(l<k){var n=k;k=l;l=n}this.set(k,0,l,i-1,m)};j.prototype.isSelected=function(k,l){if(l===null&&k===null)return false;if(l==null&&this.allDay&&k!=null)return!!this.allDay[k];if(k==null&&this.everyDay&&l!=null)return!!this.everyDay[l];if(this.hours&&k!=null&&l!=null)return!!this.hours[k][l];return false};j.prototype.$DayPartingGrid2=function(k){var l=true;for(var m=0;m<i;m++)if(this.hours[k][m]!==true){l=false;break}this.allDay[k]=l};j.prototype.$DayPartingGrid3=function(k){var l=true;for(var m=0;m<h;m++)if(this.hours[m][k]!==true){l=false;break}this.everyDay[k]=l};j.prototype.getSchedule=function(){var k=new Array(7);for(var l=0;l<h;l++){var m=this.toAPIDayIndex(l);k[m]=this.$DayPartingGrid4(l)}return c("DayPartingUtils").mergeDays(k)};j.prototype.getScheduleWithTimezoneType=function(k){var l=new Array(7);for(var m=0;m<h;m++){var n=this.toAPIDayIndex(m);l[n]=this.$DayPartingGrid4(m)}var o=c("DayPartingUtils").mergeDays(l);return o.map(function(p){var q;return new(c("AdsApiScheduleObjectRecord"))((q={},q[c("AdsApiScheduleObjectFields").START_MINUTE]=p.start_minute,q[c("AdsApiScheduleObjectFields").END_MINUTE]=p.end_minute,q[c("AdsApiScheduleObjectFields").DAYS]=p.days,q[c("AdsApiScheduleObjectFields").TIMEZONE_TYPE]=k,q))})};j.prototype.$DayPartingGrid4=function(k){var l=[],m=null,n=function n(q){if(m!==null){var r=new(c("AdsDayPartingInterval"))(m,q);l.push(r)}};for(var o=0;o<i;o++){var p=this.hours[k][o];if(m===null){if(p===true)m=o}else if(p===false){n(o);m=null}}if(m!==null)n(i);return l};j.prototype.setSchedule=function(k){var l=this.$DayPartingGrid1();if(k!=null&&k.length){k.forEach(function(o){var p=o[c("AdsApiScheduleObjectFields").DAYS];if(p!=null&&p.length)p.forEach(function(q){var r=c("getByPath")(o,c("AdsApiScheduleObjectPaths").START_MINUTE),s=c("getByPath")(o,c("AdsApiScheduleObjectPaths").END_MINUTE),t=this.fromAPIDayIndex(q),u=r/60,v=s/60;for(var n=u;n<v;n++)l[t][n]=true}.bind(this))}.bind(this));this.hours=l;for(var m=0;m<h;m++)this.$DayPartingGrid2(m);for(var n=0;n<i;n++)this.$DayPartingGrid3(n)}return this};j.prototype.toAPIDayIndex=function(k){return(k+1)%c("DayPartingUtils").DAYS_IN_WEEK};j.prototype.fromAPIDayIndex=function(k){return(k+6)%c("DayPartingUtils").DAYS_IN_WEEK};j.prototype.$DayPartingGrid1=function(){return c("DayPartingUtils").createArray(h,function(){return c("DayPartingUtils").createArray(i,function(){return false})})};f.exports=j}),null);
__d("EventPermalinkCameraFramesLogging",["EventsActionsLogger"],(function a(b,c,d,e,f,g){"use strict";f.exports={logClick:function h(i,j,k){c("EventsActionsLogger").log(this._eventID,{type:c("EventsActionsLogger").Type.CLICK,target:i,surface:c("EventsActionsLogger").Surface.PERMALINK,mechanism:c("EventsActionsLogger").Mechanism.PERMALINK,target_id:j,acontext:k},{})}}}),null);
__d("MediaEffectOwnerHubHeader.react",["fbt","Link.react","MediaEffectHubViewTab","React","XMediaEffectHubController","XUICardHeader.react","XUICardHeaderTitle.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.hubLinkTab,n=l.title,o=null;if(m){var p=c("XMediaEffectHubController").getURIBuilder().setEnum("tab",m).getURI(),q=m===c("MediaEffectHubViewTab").LEARN?h._("M\u00e1s informaci\u00f3n"):h._("Administrar efectos");o=c("React").createElement(c("Link.react"),{href:p,target:"_blank"},q)}return c("React").createElement(c("XUICardHeader.react"),{link:o,type:"secondary"},c("React").createElement(c("XUICardHeaderTitle.react"),null,n))};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("EventPermalinkCameraFramesCreate.react",["cx","fbt","ix","AsyncDialog","AsyncRequest","EventPermalinkCameraFramesLogging","EventsActionsLogger","EventsPermalinkTabBar","Image.react","MediaEffectCreateStep","MediaEffectCreationReferrer","MediaEffectFlowType","MediaEffectHubViewTab","MediaEffectOwnerHubHeader.react","MediaEffectWebdriverIDs","React","ShimButton.react","XMediaEffectCreateDialogController","XUICard.react","XUICardSection.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.$EventPermalinkCameraFramesCreate1=function(){c("EventPermalinkCameraFramesLogging").logClick(c("EventsActionsLogger").Target.FRAME_CREATE_RHC,this.props.eventID,this.props.actionContext);var s=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").EVENT).setFBID("source_id",this.props.eventID).setEnum("step",c("MediaEffectCreateStep").CREATE).setString("action_context",JSON.stringify(this.props.actionContext)).setEnum("active_tab",c("EventsPermalinkTabBar").getCurrentTab()).setEnum("ref",c("MediaEffectCreationReferrer").EVENT_PAGE).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(s))}.bind(this),o}m.prototype.render=function(){return c("React").createElement(c("XUICard.react"),{className:"_634s"},c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title,hubLinkTab:c("MediaEffectHubViewTab").LEARN}),c("React").createElement(c("XUICardSection.react"),null,c("React").createElement(c("ShimButton.react"),{className:"_weu","data-testid":c("MediaEffectWebdriverIDs").HUB_EFFECT_CREATE_BUTTON,onClick:this.$EventPermalinkCameraFramesCreate1},c("React").createElement(c("Image.react"),{src:j("293229")}),c("React").createElement("h1",{className:"_1x8l"},i._("Ayuda a las personas a compartir contenido en tu evento")),c("React").createElement("p",{className:"_wev"},i._("Crea un marco de c\u00e1mara personalizado para tu evento con \u00fatiles plantillas. Las personas podr\u00e1n agregarlo a las fotos y los videos que compartan con sus amigos.")),c("React").createElement("p",{className:"_wew"},i._("Empezar")))))};f.exports=m}),null);
__d("OzConfig",["immutable","Reflux"],(function a(b,c,d,e,f,g){var h=c("immutable").Map,i=c("Reflux").createAction({sync:true}),j=c("Reflux").createAction({sync:true}),k=c("Reflux").createStore({init:function n(){this.data=h();this.listenTo(i,this._onSetConfig);this.listenTo(j,this._onUpdateConfig)},getInitialState:function n(){return this.data},_onSetConfig:function n(o){this.data=o;this.trigger(this.data)},_onUpdateConfig:function n(o){this.data=this.data.mergeDeep(o);this.trigger(this.data)}});function l(n){return k.data.get(n)}function m(n){return k.data.getIn(n)}f.exports={ConfigStore:k,getInStaticConfig:m,getStaticConfig:l,setConfig:i,updateConfig:j}}),null);
__d("OzActions",["Reflux"],(function a(b,c,d,e,f,g){var h={};h.activateThread=c("Reflux").createAction();h.scrollThreadToTimestamp=c("Reflux").createAction();h.doneScrollingToTimestamp=c("Reflux").createAction();h.updateThreads=c("Reflux").createAction();h.maybeUpdateThreads=c("Reflux").createAction();h.clearReassignState=c("Reflux").createAction();h.deleteTask=c("Reflux").createAction();h.updateMerchants=c("Reflux").createAction();h.deleteMerchants=c("Reflux").createAction();h.updateWitIntents=c("Reflux").createAction();h.updateReps=c("Reflux").createAction();h.replaceReps=c("Reflux").createAction();h.replaceHumans=c("Reflux").createAction();h.updateRequirements=c("Reflux").createAction();h.showDialog=c("Reflux").createAction();h.hideDialog=c("Reflux").createAction();h.updateComposer=c("Reflux").createAction();h.addBubble=c("Reflux").createAction();h.addAutopilot=c("Reflux").createAction();h.isActive=c("Reflux").createAction();h.isInactive=c("Reflux").createAction();h.sendPulse=c("Reflux").createAction();h.updateQueueFilters=c("Reflux").createAction();h.intentCreator=c("Reflux").createActions(["toggle","select","clear"]);h.emailComposer=c("Reflux").createActions(["delete","add"]);h.emailComposer.update=c("Reflux").createAction({sync:true});h.inviteComposer=c("Reflux").createActions(["delete","add","create"]);h.inviteComposer.update=c("Reflux").createAction({sync:true});h.twilio=c("Reflux").createActions(["connect","endCall","hangUp","incoming","incomingAccept","incomingReject","mute","ready","setup","startCall","unmute","updateIncomingInfo","useIntent","updateRating","dialAgain"]);h.twilio.changeTo=c("Reflux").createAction({sync:true});h.twilio.sendDigits=c("Reflux").createAction({sync:true});h.sendMessageStart=c("Reflux").createAction();h.sendMessageFinish=c("Reflux").createAction();h.addHandledEvents=c("Reflux").createAction();h.updateServerOffset=c("Reflux").createAction();h.updateLoadingState=c("Reflux").createAction();h.updateCalendarEvents=c("Reflux").createAction();h.skywalkerMessage=c("Reflux").createAction();h.skywalkerStalled=c("Reflux").createAction();h.selectAIPick=c("Reflux").createAction();f.exports=h}),null);
__d("OzNotify",["cx","immutable","OzImmutablePureRenderMixin","React","ReactCSSTransitionGroup","Reflux","ShimButton.react","joinClasses"],(function a(b,c,d,e,f,g,h){var i=c("immutable").OrderedMap,j=c("immutable").Map,k={addNotif:c("Reflux").createAction({sync:true}),removeNotif:c("Reflux").createAction({sync:true})},l=c("Reflux").createStore({init:function s(){this.data=i();this.listenTo(k.addNotif,this._onAddNotif);this.listenTo(k.removeNotif,this._onRemoveNotif)},getInitialState:function s(){return this.data},_onAddNotif:function s(t){this.data=this.data.set(t.get("id"),t);this.trigger(this.data)},_onRemoveNotif:function s(p){this.data=this.data["delete"](p);this.trigger(this.data)}}),m=j({info:"_4nqo",warn:"_4nqp",error:"_4nqq"}),n=c("React").createClass({displayName:"OzNotify",mixins:[c("Reflux").connect(l,"notifs"),c("OzImmutablePureRenderMixin")],render:function s(){return c("React").createElement(c("ReactCSSTransitionGroup"),{component:"div",transitionName:"oz-fade-in-out",className:"_4nqr",transitionEnterTimeout:500,transitionLeaveTimeout:500},this.state.notifs.reverse().map(function(t,p){return c("React").createElement("div",{key:p,className:c("joinClasses")("_4nqs",m.get(t.get("level")))},t.get("msg"),c("React").createElement(c("ShimButton.react"),{className:"_ok9",inline:true,onClick:function u(){return k.removeNotif(p)}},"\xd7"))}).valueSeq())}}),o=7e3,p=0;function q(s){return function(t){p+=1;k.addNotif(j({id:p,level:s,msg:t}));(function(u){window.setTimeout(function(v){return k.removeNotif(u)},o)})(p)}}var r={Component:n,info:q("info"),warn:q("warn"),error:q("error")};f.exports=r}),null);
__d("OzAPI",["invariant","OzHelpers","OzNotify","Arbiter","ChannelConstants","ChannelManager","immutable","OzActions","OzAJAX","OzConfig","OzStores","promiseFinally","RTISubscriptionManager"],(function a(b,c,d,e,f,g,h){var i=c("immutable").List,j=c("immutable").Map,k=c("OzAJAX").ajax,l=c("OzAJAX").beacon,m=c("OzAJAX").buildURI,n=c("OzStores").ActiveThreadStore,o=c("OzStores").ThreadStore;c("ChannelManager").startChannelManager();function p(A){if(A.attachment&&!A.attachments)A.attachments=[A.attachment];var B=c("immutable").fromJS(A);return B}function q(A){return i(A.map(function(B){B=p(B);return[c("OzHelpers").msgID(B),B]})).fromEntrySeq().toMap()}function r(A){if(!A.messages)A.messages=(A["last-events"]||[]).map(function(C){C.sender=C.from;return C});A.messages=q(A.messages);var B=c("immutable").fromJS(A);return B}function s(A){return i(A.map(r))}function t(A){var B=s([A]);c("OzActions").updateThreads(B);c("OzActions").addHandledEvents(B.first().get("handled-events",i()));B.count()===1||h(0);return B.first()}function u(A){Number.isSafeInteger(A.offset)||h(0);Number.isSafeInteger(A.limit)||h(0);return k({type:"GET",url:m("threads",c("OzConfig").getStaticConfig("PAGE_ID")),params:A}).then(function(B){var C=B.threads,D=s(C);c("OzActions").updateThreads(D);return D})}function v(A){var B=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],C=arguments.length<=2||arguments[2]===undefined?null:arguments[2];typeof A==="string"||h(0);typeof B==="object"||h(0);var D,E=false;if(B instanceof FormData)D=B;else{D=JSON.stringify(B);E=true}var F=function F(){var H=n.data.get("activeIntent"),I=n.data.get("threadID"),J=H&&I&&o.data.getIn([I,"intents"],i()).findLast(function(K){return K.get("id")===H},null,j()).get("state");return J==="open"&&H},G={type:"PUT",url:m("sync"),params:{t:A,"intent-id":C||F(),page:c("OzConfig").getStaticConfig("PAGE_ID")},body:D};if(E){G.headers=G.headers||{};G.headers["content-type"]="application/json"}c("OzHelpers").info("[sync] "+A,B);return k(G)}function w(A){return function(B){return v(A,{tid:B}).then(function(C){var D=r(C);c("OzActions").updateThreads(i([D]));return D})}}function x(A){var B=A["user-id"],C=A["owner-id"],D=A["last-owner-id"],E=c("OzConfig").getStaticConfig("uid");return o.data.get(B)||C===E||D===E}var y={metrics:j({}),bumpMetric:function A(B){y.metrics=y.metrics.updateIn(B,function(C){return(C||0)+1})},setMetric:function A(B,C){y.metrics=y.metrics.setIn(B,C)},_witIntentCSV:function A(){y.witIntents().done(function(B){var C="data:text/csv;charset=utf-8,";B.forEach(function(D){return C+='"'+D.get("name")+'","'+D.get("id")+'","'+D.get("doc")+'"\n'});window.open(window.encodeURI(C))})},grab:w("grab"),release:w("release"),ready:w("ready"),notready:w("notready"),ack:w("ack"),lockThread:w("lock-thread"),markRead:w("mark-read"),unlockThread:function A(B,C){return v("unlock-thread",{tid:B,"locked-at":C}).then(t)},assignTo:function A(B,C){return v("assign-to",{tid:B,id:C})},escalate:function A(B){return y.createTag(B,"escalated")},escalateTo:function A(B,C){return y.escalate(B).then(function(){return y.assignTo(B,C)})},typing:function A(B){return v("rep-typing",{tid:B})},notTyping:function A(B){return v("rep-not-typing",{tid:B})},createReminder:function A(B,C){return v("create-reminder",babelHelpers["extends"]({tid:B},C.toJS()))},createTask:function A(B,C){return v("create-task",{tid:B,task:C.toJS()})},completeTask:function A(B,C){return v("complete-task",{tid:B,task:C.toJS()}).then(t)},editTask:function A(B,C){return v("edit-task",{tid:B,task:C.toJS()}).then(t)},cancelTask:function A(B,C){var D=arguments.length<=2||arguments[2]===undefined?false:arguments[2];c("OzActions").deleteTask(B,C.get("id"));return v("cancel-task",{tid:B,task:C.toJS(),"cancel-future":D}).then(t)},openTask:function A(B,C){return v("open-task",{tid:B,task:C.toJS()}).then(t)},closeReminder:function A(B,C,D){return v("close-reminder",{tid:B,id:C,all:D}).then(t)},editReminder:function A(B,C){return v("edit-reminder",{tid:B,reminder:C.toJS()}).then(t)},snoozeReminder:function A(B,C){return v("snooze-reminder",{tid:B,id:C}).then(t)},deleteIntentRequirement:function A(B,C,D){return v("delete-intent-requirement",{tid:B,"intent-id":C,"requirement-id":D},C).then(t)},deleteThreadRequirement:function A(B,C){return v("delete-thread-requirement",{tid:B,"requirement-id":C}).then(t)},createIntentRequirement:function A(B,C,D){return v("create-intent-requirement",{tid:B,"intent-id":C,"requirement-name":D},C).then(t)},createThreadRequirement:function A(B,C){return v("create-thread-requirement",{tid:B,"requirement-name":C}).then(t)},createIntent:function A(B,C){return v("create-intent",babelHelpers["extends"]({tid:B},C.toJS())).then(t)},openIntent:function A(B,C){return v("open-intent",{tid:B,id:C},C).then(t)},triggerAIForIntent:function A(B,C){return v("trigger-ai-for-intent",{tid:B,id:C},C)},closeIntent:function A(B,C,D,E,F){var G={tid:B,id:C,"close-state":D,feedback:E,"send-survey":F};return v("close-intent",G,C).then(t)},blockIntent:function A(B,C){return v("block-intent",{tid:B,id:C},C).then(t)},unblockIntent:function A(B,C){return v("unblock-intent",{tid:B,id:C},C).then(t)},addPhoneNumber:function A(B,C){return v("add-phone-number",{tid:B,"intent-id":C},C)},editIntent:function A(B,C){return v("edit-intent",babelHelpers["extends"]({tid:B},C.toJS()),C.get("id")).then(t)},createTag:function A(B,C){return v("add-thread-tag",{tid:B,tag:C}).then(t)},deleteTag:function A(B,C){return v("remove-thread-tag",{tid:B,tag:C}).then(t)},view:w("create-subscription"),unview:function A(B){return v("delete-subscription",{tid:B})},updateMessage:function A(B,C){return v("update-message",{tid:B,message:C.toJS()}).then(t)},everstoreUpload:function A(B){var C=new FormData();B.forEach(function(D,E){return C.append(E,D)});return v("everstore-upload",C)},upload:function A(B){var C=new FormData();B.forEach(function(D,E){return C.append(E,D)});return v("upload",C).then(function(B){return c("immutable").fromJS(B)})},sendMessage:function A(B){var C=v("send",B).then(function(D){return t({"user-id":B.tid,"last-events":D})});c("promiseFinally")(C,function(D){return c("OzActions").sendMessageFinish(B.tid)});window.setTimeout(function(){return c("OzActions").sendMessageStart(B.tid)},200);return C},scheduleMessage:function A(B){return v("schedule-send",B)},suggest:function A(B){return v("suggest",B).then(t)},scheduleSuggest:function A(B){return v("schedule-suggest",B)},deleteScheduled:function A(B,C){return v("delete-scheduled",{tid:B,id:C}).then(t)},saveNote:function A(B,C){var D={tid:B,infos:{notes:C}};return v("update-infos",D).then(t)},saveMeta:function A(B,C){var D={tid:B,infos:{"metadata-json":C.toJS()}};return v("update-infos",D).then(t)},saveMuted:function A(B,C){var D={tid:B,infos:{muted:C}};return v("update-infos",D).then(t)},createMerchant:function A(B){return v("create-merchant",B.toJS()).then(function(C){var D=i([j(C)]);c("OzActions").updateMerchants(D);return D})},editMerchant:function A(B){return v("edit-merchant",B.toJS()).then(function(C){var D=i([j(C)]);c("OzActions").updateMerchants(D);return D})},deleteMerchant:function A(B){return v("delete-merchant",B.toJS()).then(function(C){if(C&&C.id){var D=i([C.id]);c("OzActions").deleteMerchants(D);return D}else c("OzHelpers").warn("[api] unexpected delete-merchant response",C)})},sendEmail:function A(B,C){var D=n.data.get("threadID");return v("send-email",babelHelpers["extends"]({tid:D},B.toJS()),C)},sendInvite:function A(B,C){var D=n.data.get("threadID");return v("send-calendar",babelHelpers["extends"]({tid:D},B.toJS()),C)},fetchCalendar:function A(B){return k({type:"GET",url:m("threads",c("OzConfig").getStaticConfig("PAGE_ID"),B,"calendar")}).then(function(C){c("OzActions").updateCalendarEvents({tid:B,calendarEvents:C});return C})},bookOpenTable:function A(B,C,D,E,F){return v("book-reservation",{tid:B,rid:D,ts:E,covers:F},C)},everstoreURI:function A(B){return v("everstore-uri",{handle:B})},witIntents:function A(){return k({type:"GET",url:m("wit-intents",c("OzConfig").getStaticConfig("PAGE_ID"))}).then(function(B){var C=c("immutable").fromJS(B);c("OzActions").updateWitIntents(C);return C})},merchants:function A(){return k({type:"GET",url:m("merchants")}).then(function(B){c("OzActions").updateMerchants(i(B).map(function(C){return j(C)}))})},repsSync:function A(){return k({type:"GET",url:m("reps-sync")})},requirements:function A(){return k({type:"GET",url:m("requirements")}).then(function(B){c("OzActions").updateRequirements(c("immutable").fromJS(B))})},AIModules:function A(){return k({type:"GET",url:m("ai-modules")}).then(function(B){return i(B)})},authorFeedback:function A(B){return k({type:"GET",url:m("author-feedback"),params:{author_id:B}}).then(function(C){return j(C.map(function(D){D=c("immutable").fromJS(D);return[c("OzHelpers").msgID(D),D]}))})},myThreads:function A(){var B=c("OzConfig").getStaticConfig("PAGE_ID");return k({type:"GET",params:{page:B},url:m("mythreads")}).then(function(C){var D=C.mythreads;c("OzActions").updateThreads(s(D))})},allThreads:function A(B,C,D,E){var F={all:true,first_tags:B.toJS(),last_tags:C.toJS(),offset:D,limit:E};if(B.has("ready")){B=B["delete"]("ready");F.ready=true}else if(C.has("ready")){C=C["delete"]("ready");F.ready=false}return u(F)},thread:function A(B){return k({type:"GET",url:m("threads",c("OzConfig").getStaticConfig("PAGE_ID"),B)}).then(t)},handledEvents:function A(B){return k({type:"GET",params:{"intent-id":B},url:m("handled-events")}).then(function(C){c("OzActions").addHandledEvents(c("immutable").fromJS(C["handled-events"]))})},tasksForIntent:function A(B,C){var D=c("OzConfig").getStaticConfig("PAGE_ID");return k({type:"GET",params:{page:D},url:m("tasks",B)}).then(function(E){t({"user-id":C,tasks:E})})},history:function A(B,C,D){return k({type:"GET",params:{timestamp:C,limit:D},url:m("threads",c("OzConfig").getStaticConfig("PAGE_ID"),B,"history")}).then(function(E){var F=t({"user-id":B,messages:E});return F.get("messages")})},topIntents:function A(){return k({type:"GET",url:m("top-intents")}).then(function(B){return c("immutable").fromJS(B)})},intentsDashboard:function A(B){return k({type:"GET",params:B,url:m("dashboard","intent",c("OzConfig").getStaticConfig("PAGE_ID"))}).then(function(C){return c("immutable").fromJS(C)})},aiDashboard:function A(B){return k({type:"GET",params:B,url:m("dashboard","ai",c("OzConfig").getStaticConfig("PAGE_ID"))}).then(function(C){return c("immutable").fromJS(C)})},statsDashboard:function A(B){return k({type:"GET",params:B,url:m("dashboard","trainer",B["trainer-id"])}).then(function(C){return c("immutable").fromJS(C)})},teamStatsDashboard:function A(B){return k({type:"GET",params:B,url:m("dashboard","trainer-team-stats")}).then(function(C){return c("immutable").fromJS(C)})},humans:function A(){return k({type:"GET",url:m("humans")}).then(function(B){return c("OzActions").replaceHumans(c("immutable").fromJS(B))})},search:function A(B){return k({params:B,type:"GET",url:m("search")}).then(function(C){return c("immutable").fromJS(C).flatten(true)})},requestAutopilot:function A(B){window.postMessage(B,"*")},notifyExtension:function A(B){c("OzHelpers").debug("[oz-ext] notifying toto",B);window.postMessage(babelHelpers["extends"]({type:"notification"},{data:B}),"*")},recordActivity:function A(B,C){return v("activity",babelHelpers["extends"]({tid:B},{activity:C}))},sendPulse:function A(B,C){return k({type:"POST",url:m("pulse"),headers:{"content-type":"application/json"},params:{page:c("OzConfig").getStaticConfig("PAGE_ID"),duration:B},body:JSON.stringify(C)})},sendDisconnectPulse:function A(B,C){return l({url:m("pulse"),params:{page:c("OzConfig").getStaticConfig("PAGE_ID"),duration:B},body:JSON.stringify(C)})},threadFocus:function A(B,C){return v("thread-focus",{tid:B,intentID:C},C)},away:function A(B){return v("away",{away:B})},coachMode:function A(B){return v("coach-mode",{"coach-mode":B})},timestamp:function A(){var B=Date.now();return k({type:"POST",url:m("timestamp")}).then(function(C){var A=C.timestamp,D=Date.now();if(D-B>1e3)c("OzHelpers").warn("[oz-api] timestamp took over 1 second, not updating offset");else{var E=D-(A+(D-B)/2);c("OzActions").updateServerOffset({offsetMs:E})}})},init:function A(){return k({type:"GET",url:m("init")}).then(function(B){B["twilio-token"]&&c("OzActions").twilio.setup(B["twilio-token"]);c("OzConfig").updateConfig(c("immutable").fromJS(B))})},realTime:function A(B,C){var D,E=6e4,F=function F(){var L=Date.now();clearInterval(D);D=setInterval(function(M){var N=Math.round((Date.now()-L)/1e3);c("OzActions").skywalkerStalled();c("OzHelpers").warn("[rti] no payload in "+N+"seconds")},E)},G={repsVersion:-1},H=function H(L,M){var N=M.payload,B=M.topic;L==="sky"||L==="msg"||h(0);F();var O=L==="sky"?L+" "+B+" ->":L,P=N.type,Q=P||"";c("OzHelpers").debug("[rti] "+O+" "+Q,N);if(!N.data){c("OzHelpers").error("[sky] got sky event without data",N,B);return}var R=N.data["page-id"];if(R&&R!==c("OzConfig").getStaticConfig("PAGE_ID")){c("OzHelpers").debug("[sky] junk event on "+B,N);return}var S;y.bumpMetric(["realtime",P]);c("OzActions").skywalkerMessage({payload:N,timestamp:c("OzHelpers").serverNow()});switch(P){case"thread":S=N.data;t(S);break;case"thread-metrics":S=N.data;if(o.data.get(S["user-id"])){y.bumpMetric(["realtime","thread-metrics-update-thread"]);t(S)}break;case"maybe-thread":S=N.data;c("OzActions").maybeUpdateThreads(s([S]));break;case"delivered":case"seen":S=N.data;t({"user-id":S["user-id"],"last-seen":S["last-seen"]});break;case"presence":S=N.data;t({"user-id":S["user-id"],"last-presence":S["last-presence"]});break;case"carebear":(function(){var Z=N.data,P=Z.type,W=Z.tid,$={"user-id":W};$["ui-"+P]=true;t($)})();break;case"inactive":c("OzActions").isInactive();break;case"updated-merchant":c("OzActions").updateMerchants(i([j(N.data)]));break;case"deleted-merchant":c("OzActions").deleteMerchants(i([N.data.id]));break;case"phone-call":c("OzActions").twilio.updateIncomingInfo(c("immutable").fromJS(N.data));break;case"humans":c("OzActions").replaceHumans(c("immutable").fromJS(N.data));break;case"reps-sync":G=babelHelpers["extends"]({},G,{repsVersion:N.version});c("OzActions").replaceReps(c("immutable").fromJS(N.data));break;case"reps-diff":if(G.repsVersion!==N.version-1){c("OzHelpers").warn("[api] reps version out of sync",{"our-version":G.repsVersion,"next-version":N.version});G=babelHelpers["extends"]({},G,{repsVersion:-1});y.repsSync()}else{G.repsVersion=N.version;c("OzActions").updateReps(c("immutable").fromJS(N.data))}break;case"handled-events":c("OzActions").addHandledEvents(c("immutable").fromJS(N.data));break;case"config":c("OzConfig").updateConfig(c("immutable").fromJS(N.data));break;case"notify":var T=N.data,U=T.level,V=T.message;c("OzNotify")[U](V);break;case"updated-thread":var W=N.data["user-id"];if(x(N.data)){y.bumpMetric(["realtime","updated-thread-fetch-thread"]);c("OzHelpers").info("[api] fetching thread after update",W);y.thread(W)}break;case"ping":var X=N.data.timestamp,Y=c("OzHelpers").serverNow()-X;y.setMetric(["realtime","pingLatency"],Y);break;default:c("OzHelpers").debug("[sky] unk type",P,N)}},I=function I(){for(var L=arguments.length,M=Array(L),N=0;N<L;N++)M[N]=arguments[N];try{H.apply(undefined,M)}catch(O){try{c("OzHelpers").error.apply(c("OzHelpers"),["[sky] error handling message"].concat(M))}catch(P){}}},J=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("msg"),function(L,M){I("msg",M.obj)}),K=z(function(){c("Arbiter").unsubscribe(J);c("RTISubscriptionManager").unsubscribeAll()});c("RTISubscriptionManager").subscribe(B,I.bind(this,"sky"),null,z(function(L){var M=L.data,N=L.error;if(N){K();C(N,M)}else{F();C(null,M,J)}}));return K}};function z(A){var B,C,D=this;return function(){if(!B){C=A.apply(D,arguments);B=true}return C}}f.exports=y}),null);
__d("ozMakeColor",["randomShuffle","immutable"],(function a(b,c,d,e,f,g){var h=c("immutable").Map,i=c("immutable").List,j=c("immutable").Range,k=function k(n,o){return"hsla("+n+", 85%, 30%, "+o+")"};function l(){var n=arguments.length<=0||arguments[0]===undefined?25:arguments[0],o=arguments.length<=1||arguments[1]===undefined?.9:arguments[1],p=i(c("randomShuffle")(j(10,360,n).toJS())),q=0,r=h();return function(s){if(r.has(s))return k(r.get(s),o);else{var t=p.get(q);r=r.set(s,t);q=(q+1)%p.count();return k(t)}}}function m(){var n=arguments.length<=0||arguments[0]===undefined?77:arguments[0];return function(o){return k(o*n%360,.9)}}f.exports={makeColorShuffle:l,makeColor:m}}),null);
__d("OzHelpers",["ozMakeColor","BanzaiScuba","DatePickerRestraints","ErrorUtils","getURLRanges","immutable","LogHistory","OzConfig","OzConstants","OzServerTime","OzImmutablePureRenderMixin","React","URI"],(function a(b,c,d,e,f,g){var h=c("ozMakeColor").makeColor,i=c("immutable").List,j=c("immutable").Map,k=c("immutable").Set,l=c("immutable").OrderedMap,m=c("OzConstants").AUTHOR_TYPES,n=c("OzConstants").REMINDERS,o=/^image\//,p={color:h(),blobURI:function B(C){return window.URL.createObjectURL(C)},blobFromDataURI:function B(C){var D=C.split(","),E=atob(D[1]),F=D[0].split(":")[1].split(";")[0],G=new ArrayBuffer(E.length),H=new Uint8Array(G);for(var I=0;I<E.length;I++)H[I]=E.charCodeAt(I);return new Blob([G],{type:F})},toLocaleDate:function B(C){return new Date(C).toLocaleDateString()},toLocaleTime:function B(C){return new Date(C).toLocaleTimeString()},hasCmdOrCtrl:function B(C){return C.getModifierState("Meta")||C.getModifierState("Control")},keysIn:function B(){var C=k(arguments);return function(D,E){return C.has(E)}},safeParse:function B(C){var D={};try{D=JSON.parse(C)}catch(E){p.info("invalid json",C)}return D},safeURI:function B(C){var D=null;try{D=c("URI").isValidURI(C)&&new(c("URI"))(C)||null}catch(E){p.info("invalid uri",C)}return D},pure:s,memoize:t,values:function B(C){return Object.keys(C).map(function(D){return C[D]})},nonempty:function B(C){return C&&!C.isEmpty()?C:null},uniqId:v,debug:x("debug",false),info:x("info",true),warn:x("warn",true),error:x("error",true),isImageType:function B(C){return o.test(C)},isStickerType:function B(C){return C==="image/sticker"},dateRestraints:w,moveCursorToInputEnd:function B(C){if(C.setSelectionRange){var D=C.value.length;C.setSelectionRange(D,D)}},toTitleCase:function B(C){var D=k(["a","an","the","at","by","for","in","of","on","to","up","and","as","but","or","nor"]),E=function E(G,H,C){return H===0||H+G.length===C.length},F=function F(G,H,C){return E(G,H,C)||!D.has(G)?G.charAt(0).toUpperCase()+G.substr(1):G};return C.toLowerCase().replace(/\w\S*/g,F)},scrollToBottom:function B(C){C.scrollTop=C.scrollHeight},threadID:function B(C){return C.get("user-id")},isNew:function B(C){return!p.intents(C).find(p.isClosedIntent)},hasOwner:function B(C){return C.getIn(["owner","id"])},hasAllTags:function B(C,D){return D.every(function(E){return p.hasTag(C,E)})},hasSomeTag:function B(C,D){return D.some(function(E){return p.hasTag(C,E)})},hasTag:function B(C,D){return C.get("tags")&&C.get("tags").contains(D)},isEscalated:function B(C){return p.hasTag(C,"escalated")},hasEngage:function B(C){return!!C.get("engagement-type")},photo:function B(C){return C.getIn(["user-vcard","photo"])||C.getIn(["user-vcard","picture"])},compareNums:function B(C,D){if(C&&D)return D-C;else if(C)return-1;else if(D)return 1;else return 0},compareBools:function B(C,D){if(C&&D)return 0;else if(C)return-1;else if(D)return 1},getIncomingThreads:function B(C){return C.filter(function(D){return D.get("ready")&&!p.hasOwner(D)}).sort(p.threadComparator)},threadComparator:function B(C,D){var E=p.compareBools(p.hasTag(C,"vip"),p.hasTag(D,"vip")),F=p.compareBools(p.hasTag(C,"urgent"),p.hasTag(D,"urgent")),G=p.compareNums(p.urgentReminders(C).getIn([0,"scheduled-time"]),p.urgentReminders(D).getIn([0,"scheduled-time"])),H=p.compareNums(C.get("last-event-at"),D.get("last-event-at"));return E||F||G||H},lastEvents:function B(C){return C.get("last-events",i()).sortBy(function(D){return D.get("timestamp")})},lastUserMessage:function B(C){return p.lastEvents(C).findLast(function(D){return p.authorType(D)===m.USER})},shortDesc:function B(){var C=arguments.length<=0||arguments[0]===undefined?j():arguments[0],D=C.getIn(["attachments",0,"mime_type"]),E=C.getIn(["attachments",0,"sticker_id"]);return C.get("text")||E&&"sent a sticker."||D&&(D.match(/video/i)&&"sent a video."||D.match(/audio/i)&&"sent an audio clip."||D.match(/image/i)&&"sent an image")},preferredName:function B(C){return C.getIn(["metadata-json","preferred-name"])||C.getIn(["user-vcard","first-name"])},userEmail:function B(C){return C.getIn(["metadata-json","email"])},intents:function B(C){return C.get("intents",i()).sortBy(function(D){return D.get("created-at")})},isOwner:function B(C,D){var E=C.getIn(["owner","id"]);return E&&D&&E==D},wasOwner:function B(C,D){var E=C.getIn(["last-owner","id"]);return E&&D&&E==D},isLocker:function B(C,D){return C.get("locked")&&C.get("locker-id")===D},nameOrId:function B(C){return C&&(C.get("name")||C.get("id"))||""},isSubscriber:function B(C,D){return!!C.get("subscriptions",i()).find(function(E){return E===D})},hasUnblockedIntents:function B(C){return C.get("intents",i()).some(function(D){return!p.isBlockedIntent(D)})},hasOpenIntents:function B(C){return C.get("intents",i()).some(function(D){return p.isOpenIntent(D)})},openIntents:function B(C){return p.intents(C).filter(p.isOpenIntent)},closedIntents:function B(C){return p.intents(C).filter(p.isClosedIntent)},intentById:function B(C,D){return p.intents(C).findLast(function(E){return E.get("id")===D})},isBlockedIntent:function B(C){return C.get("blocked")},intentName:function B(C){return C.get("name")||"Unknown intent"},intentAlias:function B(C){return C.get("alias")||C.get("name")||"Unknown intent"},isOpenIntent:function B(C){return C.get("state")==="open"},isClosedIntent:function B(C){return!p.isOpenIntent(C)},isDeleted:function B(C){return C.get("state")==="deleted"},getName:function B(C){return C.getIn(["user-vcard","name"],"Unknown user")},lastPresence:function B(C){return Math.max(C.get("last-seen")||0,C.get("last-presence")||0)},timeSpent:function B(C){if(C.get("ready")&&C.get("last-ready-at"))return p.serverNow()-C.get("last-ready-at")},locationLastSeen:function B(C){if(C.getIn(["location","last-seen"]))return new Date(C.getIn(["location","last-seen"]))},timezone:function B(C){return C.getIn(["location","timezone"])},durationStr:function B(C){if(C==null){p.warn("[durationStr] strange duration "+C);return"[invalid duration]"}else if(C<-1e3){p.warn("[durationStr] strange duration "+C);return"-"+p.durationStr(-C)}else if(C<0){p.warn("[durationStr] strange duration "+C);return"< 0s"}else if(C===0)return"0s";else if(C<1e3)return"< 1s";else if(C<60*1e3)return Math.floor(C/1e3)+"s";else if(C<60*60*1e3)return Math.floor(C/(60*1e3))+"m";else if(C<24*60*60*1e3)return Math.floor(C/(60*60*1e3))+"h";else return Math.floor(C/(24*60*60*1e3))+"d"},serverNow:function B(){return c("OzServerTime").serverNow()},repName:function B(C,D){var E=D.get(C);return E&&E.get("name")||C||null},authorType:function B(C){var D=m.BOT,E=m.USER,F=m.TRAINER,G=C.get("sender")||C.get("from"),H=C.get("author-type");return H===D&&D||(H===F||G===c("OzConfig").getStaticConfig("PAGE_ID"))&&F||E},msgID:function B(){var C=arguments.length<=0||arguments[0]===undefined?j():arguments[0];return C.get("offline-threading-id")||C.get("mid")||p.warn("[msgID] had to resort to timestamp",C)&&null||C.get("timestamp")},isActivePulse:function B(C){var D=C&&C.get("pulse-data");if(!D)return false;return!D.get("away?")&&D.get("inactive-ms",Infinity)<3e4},EMPTY_BODY:c("immutable").fromJS([{"content-type":"text/plain; charset=UTF-8",body:{contents:""}}]),eventToEmail:function B(C){return{email:C.get("data"),intentId:C.get("intent-id"),id:C.get("id")}},reEmail:function B(C){var D=C.getIn(["data","subject"]),E=D.toUpperCase().startsWith("RE:")?D:"Re: "+D;return C.setIn(["data","subject"],E).setIn(["data","body"],this.EMPTY_BODY)},switchRecip:function B(C){var D=C.get("data"),E=D.get("from"),F=D.get("to");return C.setIn(["data","from"],F).setIn(["data","to"],i([E]))},eventToInvite:function B(C){return{invite:C.get("data"),id:C.get("id"),intentId:C.get("intent-id"),disabled:true}},urgentReminders:function B(C){return C.get("reminders",i()).sortBy(function(D){return D.get("scheduled-time")}).filter(p.isUrgentReminder)},paidReminders:function B(C){return p.urgentReminders(C).filter(p.isPaidReminder)},isUrgentReminder:function B(C){var D=C.get("state");return D==="active"||D==="active-snoozed"},isPaidReminder:function B(C){return!!C.getIn(["body","suggestion"])},isSnoozedReminder:function B(C){var D=C.get("state");return D==="snoozed"||D==="active-snoozed"},isUrgentTask:function B(C){var D=C.get("state");return D==="dispatched"&&C.get("deadline")<p.serverNow()},isPaidTask:function B(C){return!!C.getIn(["data","suggestion"])},isCompletedTask:function B(C){return C.get("state")==="completed"},isCanceledTask:function B(C){return C.get("state")==="canceled"},isWaitingTask:function B(C){return C.get("state")==="waiting"},isClosedTask:function B(C){return p.isCompletedTask(C)||p.isCanceledTask(C)},isOpenTask:function B(C){return!p.isClosedTask(C)},isUnread:function B(C){return C.get("read-state")==="unread"},soonestDueTask:function B(C){return C.filterNot(p.isClosedTask).minBy(function(D){return D.get("start-at")})},nextTaskForIntent:function B(C){var D=arguments.length<=1||arguments[1]===undefined?i():arguments[1];return p.soonestDueTask(D.filter(function(E){return E.get("intent-id")===C.get("id")}))},nextTaskForThread:function B(C){return p.soonestDueTask(C.get("tasks",i()))},unreadTs:function B(C){return c("OzConfig").ConfigStore.data.getIn(["GK","responsivenessV2"])?C.get("unread-timestamp"):(p.lastUserMessage(C)||j()).get("timestamp")},hasPaid:function B(C){return!!p.paidReminders(C).size},hasReminder:function B(C){return!!p.urgentReminders(C).size},minAge:function B(C){var B=+C.getIn(["user-vcard","age-range","min"]);return Number.isSafeInteger(B)?B:0},shimURI:function B(C){return new(c("URI"))("https://l.facebook.com/l.php").setQueryData({u:C,h:c("OzConfig").getStaticConfig("shimhash")}).toString()},uiSuggestion:function B(C){var D=C.has("amount")?"$"+(C.get("amount")/100).toFixed(2):"";return{id:C.get("item-id")||"-1",name:C.get("name"),desc:C.get("description"),thumb_url:C.get("thumb-url"),merchant_name:C.get("merchant-name")||"",total_cost:C.get("amount")?j({amount:C.get("amount")}):null,display_total_cost:D,target_url:p.shimURI(C.get("target-url")),payment_id:C.get("payment-id"),expiration_time:C.get("expiration-time")}},parsePhoneNumber:function B(C){if(!C)return"";if(C.length==12&&C[0]=="+")C=C.substr(1);if(C.length==11&&C[0]=="1")C=C.substr(1);switch(C.length){case 10:return"("+C.substr(0,3)+") "+C.substr(3,3)+"-"+C.substr(6,4);case 7:return C.substr(0,3)+"-"+C.substr(3,4);default:return C}},validateURL:function B(C){return!!C&&typeof C==="string"&&c("getURLRanges")(C).length&&c("URI").isValidURI(C)},normalizeMerchant:function B(C){return C.updateIn(["website"],function(D){if(!D)return D;var E=c("getURLRanges")(D);if(!E||E.length===0)return D;return E[0].entity.url}).updateIn(["page-id"],function(D){if(Number.isFinite(D)||typeof D==="string")return parseInt(D,10);return null})},validateMerchant:function B(C){var D=k(["name-dba","country"]),E=k(["address","website","page-id"]),F={},G=C.get("website","");if(G&&!this.validateURL(G))F.website="Website is an invalid URL";var H=C.get("page-id",null);if(H!=null&&!Number.isFinite(H))F["page-id"]="FB Page must be a number";D.map(function(J){if(!C.get(J))F[J]="This field is required"});if(k(C.filter(function(C){return C}).keys()).intersect(E).isEmpty()){var I="At least one of "+E.join(", ")+" is required";E.forEach(function(C){F[C]=I})}return j(F)},isDaytime:function B(C){var D=(Date.now()+C)%(24*60*60*1e3),E=D/(60*60*1e3);return E>=6},fullThreadData:function B(C,D,E){var F=C.get(E);if(!F)return null;return F.update("intents",function(G){return(G||i()).map(function(H){var I=q(D,H),J=r(F,I);return J})})},threadPath:function B(C){var D=C.threadid,E=C.intentid,F=C.taskid,G=C.eventid,H=E?"/intent/"+E:"",I=F?"/task/"+F:"",J=G?"/event/"+G:"";return"/inbox/"+D+H+(I||J)},updateInWhen:function B(C,D,E){var F={};if(C.getIn(D,F)!==F)return C.updateIn(D,E);return C},getRequirement:function B(C,D){return C.get("requirements",i()).find(function(E){return E.get("name")===D})}};function q(B,C){var D=B.getIn(["byIntent",C.get("id")],j());return C.set("events",D)}function r(B,C){var D=B.getIn(["tasks-by-intent",C.get("id")]);return C.set("tasks",D)}function s(B){var C=arguments.length<=1||arguments[1]===undefined?"OzPureComponent":arguments[1];return c("React").createClass({displayName:C,mixins:[c("OzImmutablePureRenderMixin")],render:function D(){return B(this.props)}})}function t(B,C){var D=arguments.length<=2||arguments[2]===undefined?1e3:arguments[2],E=l();return function(){for(var F=arguments.length,G=Array(F),H=0;H<F;H++)G[H]=arguments[H];var I=C.apply(this,G);if(E.get(I))return E.get(I);else{var J=B.apply(this,G);E=E.set(I,J).takeLast(D);return J}}.bind(this)}var u=0;function v(){return u++}function w(){var B=new Date(),C=new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate())),D=new Date(+C);D.setFullYear(C.getFullYear()+n.RANGE_IN_YEARS);return{dateRestraints:[c("DatePickerRestraints").enforceDateIsNoEarlierThan(C),c("DatePickerRestraints").enforceDateIsNoLaterThan(D)]}}c("ErrorUtils").addListener(function(B){var C=A({level:"error",message:"[unhandled-error]["+B.name+"] "+B.message,data:"--stack\n"+B.stack+"\n\n--originalError\n"+B._originalError});z(C);y(C)});function x(B,C){return function(){for(var D=arguments.length,E=Array(D),F=0;F<D;F++)E[F]=arguments[F];var G=E[0],H=E.slice(1);window.console.log(B,G,H);var I=A({level:B,message:G,data:H});z(I);C&&y(I)}}function y(B){var C=new(c("BanzaiScuba"))(c("OzConfig").getStaticConfig("scubaCategory"));Object.entries(B).forEach(function(D){var E=D[0],F=D[1];Number.isSafeInteger(F)?C.addInteger(E,F):C.addNormal(E,F)});C.post()}function z(B){var C=c("LogHistory").getInstance("oz-logger");(C[B.level]||C.debug).call(C,B.message,"")}function A(B){return babelHelpers["extends"]({},B,{uid:c("OzConfig").getStaticConfig("uid"),public_name:c("OzConfig").getStaticConfig("publicName"),rev:c("OzConfig").getStaticConfig("rev"),timestamp:p.serverNow()})}f.exports=p}),null);
__d("OzServerTime",["OzStores","OzAPI"],(function a(b,c,d,e,f,g){var h=c("OzStores").ServerOffsetStore,i;function j(){return Math.floor(Date.now()-h.data.get("offsetMs"))}function k(){window.clearInterval(i)}function l(){c("OzAPI").timestamp();k();i=window.setInterval(function(){return c("OzAPI").timestamp()},1e3*60*60*3)}f.exports={serverNow:j,setup:l,tearDown:k}}),null);
__d("OzStores",["invariant","OzHelpers","immutable","OzActions","Reflux"],(function a(b,c,d,e,f,g,h){var i=c("immutable").List,j=c("immutable").Map,k=c("immutable").OrderedMap,l=c("immutable").OrderedSet,m=c("immutable").Set,n=c("immutable").Iterable,o=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateRequirements,this._onUpdateRequirements)},getInitialState:function N(){return this.data},_onUpdateRequirements:function N(O){this.data=this.data.withMutations(function(P){O.forEach(function(Q){var R=Q.get("name"),S=P.get(R,j()).merge(Q).update("wit-intent-uuids",function(T){return T&&T.toSet()||m()});P.set(R,S)})});c("OzHelpers").debug("[oz] updated RequirementStore");this.trigger(this.data)}}),p=c("Reflux").createStore({init:function N(){this.data=l();this.listenTo(c("OzActions").addBubble,this._onAddBubble)},getInitialState:function N(){return this.data},_onAddBubble:function N(O){j.isMap(O)||h(0);this.data=this.data.add(O).takeLast(100);this.trigger(this.data)},metrics:function N(){return j({bubbleCount:this.data.count()})}}),q=c("Reflux").createStore({init:function N(){this.data=k();this.listenTo(c("OzActions").addAutopilot,this._onAddAutopilot)},getInitialState:function N(){return this.data},_onAddAutopilot:function N(O){j.isMap(O)||h(0);this.data=this.data.set(O.get("id"),O.get("data")).takeLast(100);this.trigger(this.data)}}),r="id",s=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateWitIntents,this._onUpdateWitIntents)},getInitialState:function N(){return this.data},_onUpdateWitIntents:function N(O){c("immutable").List.isList(O)||h(0);this.data=this.data.withMutations(function(P){return O.reduce(function(Q,R){return Q.set(R.get(r),R)},P)});this.trigger(this.data)},metrics:function N(){return j({witIntentCount:this.data.count()})}}),t=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").activateThread,this._onActivateThread)},getInitialState:function N(){return this.data},_onActivateThread:function N(O){var P=O.threadID,Q=O.intentID,R=O.taskID,S=O.eventID;c("OzHelpers").info("[store/activeThread] set active thread: ",{threadID:P,intentID:Q,taskID:R,eventID:S});this.data=this.data.set("oldThreadID",this.data.get("threadID")).set("threadID",P).set("activeIntent",Q).set("activeTask",R).set("activeEvent",S);this.trigger(this.data)}}),u="user-id",v=function v(N,O){return N.reduce(function(P,Q){P[Q.get(O)]=Q;return P},{})};function w(N,O){j.isMap(N)&&j.isMap(O)||h(0);var P=v(N,"offline-threading-id"),Q=v(N,"mid");return N.withMutations(function(R){return O.valueSeq().filterNot(function(S){var T=S.get("attachments");if(T)return T.first()&&T.first().getIn(["xma","body"])===null;return false}).reduce(function(S,T){var U=T.get("offline-threading-id"),V=T.get("mid"),W=U&&P[U]||V&&Q[V]||S.get(c("OzHelpers").msgID(T));if(W){S=S["delete"](c("OzHelpers").msgID(W));T=W.merge(T);U=T.get("offline-threading-id");V=T.get("mid")}U&&(P[U]=T);V&&(Q[V]=T);return S.set(c("OzHelpers").msgID(T),T)},R)})}var x=function x(N,O,P){switch(P){case"messages":return w(N,O);case"intents":case"reminders":var Q=j().withMutations(function(T){return(N||i()).reduce(function(T,U){return T.set(U.get("id"),U)},T)}),R=O.reduce(function(T,U){var V=U.get("id");return T.set(V,(T.get(V)||j()).merge(U))},Q).valueSeq().toList();return R;case"tasks":var S=O.map(function(T){return T.get("intent-id")}).toSet();return N.filterNot(function(T){return S.has(T.get("intent-id"))}).concat(O);case"light-thread":return N&&O;default:return O}},y=function y(N){return N.set("tasks-by-intent",N.get("tasks",i()).groupBy(function(O){return O.get("intent-id")}))},z=function z(N){typeof N==="function"||h(0);return function(O,P){j.isMap(P)&&j.isMap(O)||h(0);var Q=P.get(u),R=(O.get(Q)||j()).mergeWith(N,P),S=y(R);return O.set(Q,S)}},A=c("Reflux").createStore({init:function N(){this.data=j();this.updatedAt=Date.now();this.listenTo(c("OzActions").updateThreads,this._onUpdateThreads);this.listenTo(c("OzActions").maybeUpdateThreads,this._onMaybeUpdateThreads);this.listenTo(c("OzActions").clearReassignState,this._onClearReassignState);this.listenTo(c("OzActions").deleteTask,this._onDeleteTask)},getInitialState:function N(){return this.data},_onUpdateThreads:function N(O){i.isList(O)||h(0);this.data=this.data.withMutations(function(P){return O.reduce(z(x),P)});this.updatedAt=Date.now();this.trigger(this.data)},_onMaybeUpdateThreads:function N(O){i.isList(O)||h(0);var P=O.filter(function(Q){return this.data.has(Q.get(u))}.bind(this));if(P.isEmpty()){c("OzHelpers").debug("[threads] not updating partial threads");return}this.data=this.data.withMutations(function(Q){return P.reduce(z(x),Q)});this.updatedAt=Date.now();this.trigger(this.data)},_onClearReassignState:function N(){this.data=this.data.map(function(O){return O.get("ui-reassign")?O["delete"]("ui-reassign"):O});this.trigger(this.data)},_onDeleteTask:function N(O,P){this.data=this.data.updateIn([O,"tasks"],function(Q){return Q.filterNot(function(R){return R.get("id")===P})});this.trigger(this.data)},metrics:function N(){return j({threadCount:this.data.count(),taskCount:this.data.reduce(function(O,P){return P.get("tasks",i()).count()+O},0)})}}),B=c("Reflux").createStore({init:function N(){this.data=this._make(null,null);this.listenTo(c("OzActions").showDialog,this._onShowDialog);this.listenTo(c("OzActions").hideDialog,this._onHideDialog)},getInitialState:function N(){return this.data},_make:function N(O,P){return{dialogClass:O,dialogProps:P}},_onShowDialog:function N(O,P){this.data=this._make(O,P);this.trigger(this.data)},_onHideDialog:function N(){this.data=this._make(null,null);this.trigger(this.data)}}),C=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateMerchants,this._onUpdateMerchants);this.listenTo(c("OzActions").deleteMerchants,this._onDeleteMerchants)},getInitialState:function N(){return this.data},_onUpdateMerchants:function N(O){i.isList(O)||h(0);this.data=this.data.withMutations(function(P){return O.reduce(function(Q,R){var S=R.get("id"),T=Q.get(S,j()).merge(R);return Q.set(S,T)},P)});c("OzHelpers").debug("[oz] updated merchants",this.data.toJS());this.trigger(this.data)},_onDeleteMerchants:function N(O){i.isList(O)||h(0);this.data=O.reduce(function(P,Q){return P["delete"](Q)},this.data);c("OzHelpers").debug("[oz] deleted merchants",this.data.toJS());this.trigger(this.data)},metrics:function N(){return j({merchantCount:this.data.count()})}}),D=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateReps,this._onUpdateReps);this.listenTo(c("OzActions").replaceReps,this._onReplaceReps)},getInitialState:function N(){return this.data},_onReplaceReps:function N(O){this.data=j().withMutations(function(P){O.reduce(function(Q,R){return Q.set(R.get("fbid"),R)},P)});this.trigger(this.data)},_onUpdateReps:function N(O){this.data=this.data.withMutations(function(P){return O.reduce(function(Q,R){return Q.mergeIn([R.get("fbid")],R)},P)});this.trigger(this.data)},metrics:function N(){return j({repCount:this.data.count()})}}),E=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").replaceHumans,this._onReplace)},getInitialState:function N(){return this.data},_onReplace:function N(O){this.data=O;this.trigger(this.data)},metrics:function N(){return j({humanCount:this.data.count()})}}),F=c("Reflux").createStore({init:function N(){this.data=j({queue:j({showTags:m(),hideTags:m()}),all:j({showTags:m(),hideTags:m()})});this.listenTo(c("OzActions").updateQueueFilters,this._onUpdateFilters)},getInitialState:function N(){return this.data},_onUpdateFilters:function N(O){this.data=this.data.merge(O);this.trigger(this.data)}}),G=c("Reflux").createStore({init:function N(){this._data=j();this.listenTo(c("OzActions").sendMessageStart,this._onShiftSending.bind(this,1));this.listenTo(c("OzActions").sendMessageFinish,this._onShiftSending.bind(this,-1))},getInitialState:function N(){return this._data},_onShiftSending:function N(O,P){this._data=this._data.update(P,function(Q){return(Q||0)+O});this.trigger(this._data)}}),H=c("Reflux").createStore({init:function N(){this.data=j({byIntent:j(),byThread:j(),byId:j()});this.listenTo(c("OzActions").addHandledEvents,this._onAddHandledEvents)},getInitialState:function N(){return this.data},_onAddHandledEvents:function N(O){this.data=this.data.withMutations(function(P){O.reduce(function(Q,R){return Q.setIn(["byIntent",R.get("intent-id"),R.get("id")],R).setIn(["byId",R.get("id")],R)},P)});this.trigger(this.data)},metrics:function N(){return j({handledEventCount:this.data.get("byId").count()})}}),I=c("Reflux").createStore({init:function N(){this.data=j({offsetMs:0});this.listenTo(c("OzActions").updateServerOffset,this._onUpdateServerOffset)},getInitialState:function N(){return this.offsetMs},_onUpdateServerOffset:function N(O){var P=O.offsetMs;this.data=this.data.set("offsetMs",P);this.trigger(this.data)}}),J=j({state:"loading",error:null,result:null,skip:false}),K=c("Reflux").createStore({init:function N(){this.data=j({skywalker:J,init:J,"wit-intents":J,merchants:J,humans:J,requirements:J});this.listenTo(c("OzActions").updateLoadingState,this._onUpdateLoadingState)},getInitialState:function N(){return this.data},_onUpdateLoadingState:function N(O){var P=O.component,Q=O.state,R=O.error,S=O.result,T=O.skip;c("OzHelpers").info("[store/loading] "+Q+" "+P);if(!this.data.has(P))c("OzHelpers").warn("[store/loading] "+P+" wasn't listed in LoadingStore.init");this.data=this.data.set(P,j({state:Q,error:R,result:S,skip:T}));this.trigger(this.data)}}),L=c("Reflux").createStore({init:function N(){this.data=j();this.listenTo(c("OzActions").updateCalendarEvents,this._onUpdateCalendarEvents)},getInitialState:function N(){return this.data},_onUpdateCalendarEvents:function N(O){var P=O.tid,Q=O.calendarEvents,R=Q&&Q.sort?Q:[];this.data=this.data.set(P,R.sort(function(S,T){var U=new Date(S.startDate),V=new Date(T.startDate);return U.getTime()-V.getTime()}));this.trigger(this.data)},metrics:function N(){return j({calendarEventCount:this.data.count()})}}),M=c("Reflux").createStore({init:function N(){this.data=j({isStalled:false});this.listenTo(c("OzActions").skywalkerMessage,this._onSkywalkerMessage);this.listenTo(c("OzActions").skywalkerStalled,this._onSkywalkerStalled)},getInitialState:function N(){return this.data},_onSkywalkerMessage:function N(O){var P=O.timestamp;this.data=this.data.set("last-receive-ts",P).set("isStalled",false);this.trigger(this.data)},_onSkywalkerStalled:function N(){this.data=this.data.set("isStalled",true);this.trigger(this.data)}});f.exports={ActiveThreadStore:t,BubbleStore:p,DialogStore:B,MerchantStore:C,AutopilotStore:q,QueueFilterStore:F,RepStore:D,HumanStore:E,LoadingStore:K,RequirementStore:o,ThreadStore:A,WitIntentStore:s,PendingMessageStateStore:G,HandledEventsStore:H,ServerOffsetStore:I,CalendarEventStore:L,SkywalkerStore:M}}),null);
__d("OzAJAX",["invariant","Promise","OzHelpers","OzNotify","OzConfig","URI"],(function a(b,c,d,e,f,g,h){"use strict";var i={metrics:{pendingCount:0,requestCount:0,failedCount:0,totalRequestMs:0,averageRequestMs:0},updateMetricsStart:function m(){i.metrics.pendingCount+=1},updateMetricsEnd:function m(n,o){var p=i.metrics;p.pendingCount-=1;if(!n.status||n.status===0||n.status>399)p.failedCount+=1;p.requestCount+=1;p.totalRequestMs+=o;p.averageRequestMs=Math.round(p.totalRequestMs/p.requestCount)},ajax:function m(n){var o=n.type,p=n.headers,q=n.params,r=n.body,s=n.url;q=k(q);var t={type:o,url:s,headers:p,params:q,body:r};i.updateMetricsStart();var u=Date.now();return j(t).then(function(v){i.updateMetricsEnd(v,Date.now()-u);return JSON.parse(v.responseText)},function(v){i.updateMetricsEnd(v,Date.now()-u);var w=void 0;try{w=JSON.parse(v.responseText)}catch(x){}l(w||{},v,t);throw w||v})},beacon:function m(n){window.navigator&&window.navigator.sendBeacon||h(0);var o=n.params,p=n.body,q=n.url;o=k(o);return window.navigator.sendBeacon(new(c("URI"))(q).addQueryData(o).toString(),new Blob([p],{type:"application/json"}))},buildURI:function m(){var n=c("OzConfig").getStaticConfig("API_PATH");n||h(0);for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return[n].concat(p).join("/")}};function j(m){var n=m.type,o=m.headers,p=m.params,q=m.body,r=m.url;return new(c("Promise"))(function(s,t){var u=new XMLHttpRequest(),v=new(c("URI"))(r);if(p)v.addQueryData(p);u.timeout=1e3*60*3;u.open(n,v.toString(),true);if(o)for(var w=Object.keys(o),x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z;u.setRequestHeader(A,o[A])}u.onreadystatechange=function(){if(u.readyState!==4)return;if(u.status===200)s(u);else t(u)};u.send(q)})}function k(m){c("OzConfig").getStaticConfig("authToken")||h(0);c("OzConfig").getStaticConfig("uid")||h(0);c("OzConfig").getStaticConfig("API_VERSION")||h(0);return babelHelpers["extends"]({xs:c("OzConfig").getStaticConfig("authToken"),c_user:c("OzConfig").getStaticConfig("uid"),rep_name:c("OzConfig").getStaticConfig("fullName"),v:c("OzConfig").getStaticConfig("API_VERSION")},m)}function l(m,n,o){c("OzHelpers").error("[oz-api] backend rejected",m,n,o);var p=m.error||"Something went wrong, the team has been notified already.";if(m.info)c("OzNotify").info(p);else if(n.status===400)c("OzNotify").warn(p);else if(n.status===0)c("OzNotify").error("Something went wrong. If this continues, please contact the Wit oncall");else c("OzNotify").error(p)}f.exports=i}),null);
__d("OzDateTimePicker.react",["cssVar","cx","OzHelpers","joinClasses","AbstractDateTimePicker.react","AdsTimezone","Arbiter","BUIDatePicker.react","BUITimeInput.react","DatePickerRestraints","immutable","LocalDateTime","OzConfig","ReactComponentWithPureRenderMixin","React","ReactDOM","Reflux","SUIAudiencePlatformTheme","SUITheme","SUITimeZoneSelector.react","Timezone","XUIError.react"],(function a(b,c,d,e,f,g,h,i){var j,k,l=c("React").PropTypes,m=c("immutable").Map,n=c("React").createClass({displayName:"OzDateTimePicker",mixins:[c("ReactComponentWithPureRenderMixin"),c("Reflux").connect(c("OzConfig").ConfigStore,"config")],propTypes:babelHelpers["extends"]({dateRestraints:l.arrayOf(l.func),disabled:l.bool,height:l.oneOf(["short","tall"]),layout:l.oneOf(["one-line","two-line","three-line"]),onChange:l.func.isRequired,showTimezoneName:l.bool,timestamp:l.number,timezone:l.string},c("XUIError.react").PropTypes),getDefaultProps:function w(){return{dateRestraints:u(),disabled:false,height:"short",layout:"one-line",showTimezoneName:true,timezone:q()}},render:function w(){var x=this.props,y=x.className,z=x.dateRestraints,A=x.disabled,B=x.height,C=x.layout,D=x.onChange,E=x.showTimezoneName,F=x.timestamp,G=x.timezone,H=x.xuiError,I=x.xuiErrorAlignh,J=x.xuiErrorPosition,K=babelHelpers.objectWithoutProperties(x,["className","dateRestraints","disabled","height","layout","onChange","showTimezoneName","timestamp","timezone","xuiError","xuiErrorAlignh","xuiErrorPosition"]),L={xuiError:H,xuiErrorAlignh:I,xuiErrorPosition:J},M=t(G),N=o(F,M),O=c("joinClasses")("_3hma"+(A?" _3hmb":""),y),P=C==="two-line"&&E&&202||!E&&110||"auto";return c("React").createElement(c("XUIError.react"),L,c("React").createElement("div",{className:O},c("React").createElement(c("AbstractDateTimePicker.react"),babelHelpers["extends"]({},K,{className:"_3hmc",classNames:{innerWrapper:"_3hmd"},datePicker:c("React").createElement(c("BUIDatePicker.react"),{className:"_3hme",dateRestraints:this._dateRestraints(M),height:B,placeholder:"mm/dd/yyyy"}),disabled:A,onChange:function(N){return this._handleChange(N,M)}.bind(this),timeInput:c("React").createElement(c("BUITimeInput.react"),{className:"_3hml"+(C!=="three-line"?" _3hmm":"")+(C==="three-line"?" _3hmn":""),height:B}),timezoneID:M,value:N})),c("React").createElement(v,{style:!F&&{display:"none"},className:"_3hmo"+(C==="one-line"?" _3hmm":"")+(C!=="one-line"?" _3hmn":""),isDisabled:A,onChange:function(Q){return this._handleChange(N,Q.get("timeZoneId"))}.bind(this),shouldShowSubtitleInSelector:E,value:c("SUITimeZoneSelector.react").VALUE({timeZoneId:M}),width:P})))},_handleChange:function w(x,y){var z=p(x,y),A=r(y);this.props.onChange({timestamp:z,timezone:A})},_dateRestraints:function w(x){return this.props.dateRestraints&&this.props.dateRestraints.map(function(y){return function(z){return y(z&&z.toDateTime(x).toDate())}})}});function o(w,x){try{if(w&&x!=null)return c("LocalDateTime").fromInstant(Math.round(w/1e3),x);else return null}catch(y){c("OzHelpers").warn("[dateTimePicker] cannot convert to LocalDateTime",w,x,y);return null}}function p(w,x){try{if(w&&x!=null){var y=w.toInstant(x)*1e3,z=y-y%6e4;return z}else return null}catch(A){c("OzHelpers").warn("[dateTimePicker] cannot convert from LocalDateTime",w,x,A);return null}}function q(){var w=c("Timezone").getEnvironmentTimezoneID();w==null&&c("OzHelpers").warn("[dateTimePicker] could not get environment time zone");return r(w)}function r(w){var x=c("AdsTimezone").names[w];x==null&&c("OzHelpers").warn("[dateTimePicker] unknown timezone id",w);return x}var s=m(c("AdsTimezone").names.map(function(w,x){return[w,x]}));function t(w){var x=s.get(w);x===undefined&&c("OzHelpers").warn("[timezoneIDForName] unrecognized timezone",w);return x||s.get("America/Los_Angeles")}function u(){var w=new Date(),x=new Date(Date.UTC(w.getFullYear(),w.getMonth(),w.getDate())),y=new Date(+x),z=new Date(+x);y.setFullYear(x.getFullYear()-5);z.setFullYear(x.getFullYear()+5);return[c("DatePickerRestraints").enforceDateIsNoEarlierThan(y),c("DatePickerRestraints").enforceDateIsNoLaterThan(z)]}j=babelHelpers.inherits(v,c("React").PureComponent);k=j&&j.prototype;v.prototype.componentDidMount=function(){"use strict";c("ReactDOM").findDOMNode(this.refs.timezoneSelector).addEventListener("focusout",function(w){return window.setTimeout(function(w){return c("Arbiter").inform("reflow")})})};v.prototype.render=function(){"use strict";return c("React").createElement(c("SUITimeZoneSelector.react"),babelHelpers["extends"]({},this.props,{ref:"timezoneSelector",theme:c("SUIAudiencePlatformTheme")}))};function v(){"use strict";j.apply(this,arguments)}n.timezoneIDForName=t;f.exports=n}),null);
__d("EventPermalinkCameraFramesCreateWithDefaultFrame.react",["cx","fbt","ix","MediaEffectMetadataActionCreators","AsyncDialog","AsyncRequest","Button.react","DialogX","EventsActionsLogger","EventPermalinkCameraFramesLogging","FBToggleSwitch.react","FXEntMediaEffectStatus","Image.react","MediaEffectFlowType","MediaEffectCreateStep","MediaEffectHubViewTab","MediaEffectOwnerHubHeader.react","MediaEffectCreationReferrer","React","XMediaEffectCreateDialogController","XUICard.react","XUIText.react","XUICardSection.react","BackgroundImage.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k,l,m=100,n=158;k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$EventPermalinkCameraFramesCreateWithDefaultFrame1=function(){c("EventPermalinkCameraFramesLogging").logClick(c("EventsActionsLogger").Target.FRAME_CREATE_RHC,this.props.eventID,this.props.actionContext);var u=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").EVENT).setFBID("source_id",this.props.eventID).setEnum("step",c("MediaEffectCreateStep").CREATE).setEnum("ref",c("MediaEffectCreationReferrer").EVENT_PAGE).getURI(),v=this.props.effect.effectData.id;c("AsyncDialog").send(new(c("AsyncRequest"))(u),function(w){w.subscribe(["hide","success"],function(x,event){this.props.effectUpdateHandler(v)}.bind(this))}.bind(this))}.bind(this),q}o.prototype.componentWillMount=function(){c("MediaEffectMetadataActionCreators").initFrameData(this.props.effect.effectEditorData)};o.prototype.isToggleEnabled=function(){var p=this.props.effect.effectData.status;return p===c("FXEntMediaEffectStatus").INACTIVE||p===c("FXEntMediaEffectStatus").ACTIVE};o.prototype.render=function(){var p=this.props.effect.effectData,q=p.status;return c("React").createElement(c("XUICard.react"),{className:"_634s"},c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title,hubLinkTab:c("MediaEffectHubViewTab").LEARN}),c("React").createElement(c("XUICardSection.react"),null,c("React").createElement("div",{className:"_46ca"},p.hasEnabledActivations?c("React").createElement(c("Image.react"),{src:j("353079")}):c("React").createElement(c("Image.react"),{src:j("353078")}),c("React").createElement("div",{className:"_46cb"},this.isToggleEnabled()?c("React").createElement(c("FBToggleSwitch.react"),{checked:q===c("FXEntMediaEffectStatus").ACTIVE,animate:true,onToggle:function(){return this.props.toggleEventHandler(p.id,q===c("FXEntMediaEffectStatus").INACTIVE)}.bind(this),tooltip:q===c("FXEntMediaEffectStatus").ACTIVE?i._("El marco de la c\u00e1mara est\u00e1 activado"):i._("El marco de la c\u00e1mara est\u00e1 desactivado")}):null),c("React").createElement("div",{className:"_46cd"},c("React").createElement(c("BackgroundImage.react"),{backgroundSize:"contain",height:n,src:p.thumbnailPortrait,width:m})),c("React").createElement("div",{className:"_46cf"},c("React").createElement(c("XUIText.react"),{size:"medium",weight:"bold",className:"_46cg"},i._("Anima a las personas a compartir contenido en tu evento")),c("React").createElement("p",{className:"_46ch"},i._("Puedes usar el marco de la c\u00e1mara predeterminado o crear uno personalizado para que tus invitados lo usen en las fotos y los videos que compartan.")),c("React").createElement("div",{className:"_46ci"},c("React").createElement(c("Button.react"),{onClick:this.$EventPermalinkCameraFramesCreateWithDefaultFrame1,use:"default",label:i._("Subir otro")}))))))};f.exports=o}),null);
__d("MediaEffectAnalyticsStats.react",["cx","fbt","React","XUIText.react","intlSummarizeNumber"],(function a(b,c,d,e,f,g,h,i){"use strict";var j=function j(k){return c("React").createElement("div",{className:"_1rem"},c("React").createElement(c("XUIText.react"),{className:"_4vei",size:k.size,weight:k.weight},i._("{count}",[i.param("count",c("intlSummarizeNumber")(k.count))])),c("React").createElement(c("XUIText.react"),null,k.label))};f.exports=j}),null);
__d("MediaEffectShareReferrer",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONFIRM_DIALOG:"confirm_dialog",DETAIL_DIALOG:"detail_dialog",HUB_EFFECT_PREVIEW:"hub_effect_preview"})}),null);
__d("XMediaEffectAsyncRequestEffectNotificationController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/async/request_notification/",{effect_id:{type:"FBID"},share_actor_id:{type:"FBID"},share_target_id:{type:"FBID"}})}),null);
__d("XMediaEffectDeeplinkFallbackController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/tryit/{effect_id}/",{media_effect_web_link_source:{type:"Enum",defaultValue:"direct",enumType:1},effect_id:{type:"FBID",required:true}})}),null);
__d("XMediaEffectHubEffectArchiveAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/effects/async/archive/",{effect_ids:{type:"FBIDVector",required:true}})}),null);
__d("XMediaEffectShareEffectDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/media_effect/share/dialog/",{page_id:{type:"FBID"},effect_id:{type:"FBID"},ref:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("XProfilePictureOverlayLandingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profilepicframes/",{overlay_source_object_id:{type:"FBID"},photo_id:{type:"Int"},profile_id:{type:"Int"},query:{type:"String"},selected_page_id:{type:"Int"},selected_overlay_id:{type:"Int"}})}),null);
__d("MediaEffectHubEffectActionConfig",["fbt","AsyncDialog","AsyncRequest","AsyncResponse","immutable","MediaEffectCreateStep","MediaEffectCreationReferrer","MediaEffectFlowType","MediaEffectHubDispatcher","MediaEffectHubFunnelLogger","MediaEffectMetadataDataLoader","MediaEffectShareReferrer","React","SimpleXUIDialog","XMediaEffectAsyncRequestEffectNotificationController","XMediaEffectCreateDialogController","XMediaEffectDeeplinkFallbackController","XMediaEffectHubEffectArchiveAsyncController","XMediaEffectShareEffectDialogController","XProfilePictureOverlayLandingController","XUIDialogButton.react","XUIDialogCancelButton.react","goURI"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("immutable").Set;function j(t,u,v,w){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ACTIVE_STATUS_CHANGE","send:"+(t?"enable":"disable"));c("MediaEffectMetadataDataLoader").changeActiveStatus(t,u).then(function(x){var u=x.payload.effects;c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ACTIVE_STATUS_CHANGE","receive");c("MediaEffectHubDispatcher").dispatch({type:"effects_edited",payload:{effects:u}});v&&v()})["catch"](function(x){c("AsyncResponse").defaultErrorHandler(x);w&&w()}).done()}function k(t,u,v){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ARCHIVE","send");var w=c("XMediaEffectHubEffectArchiveAsyncController").getURIBuilder().setFBIDVector("effect_ids",t.toSeq().map(function(x){return x.id}).toArray()).getURI();new(c("AsyncRequest"))().setURI(w).setHandler(function(x){var t=x.payload.effects;c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_ARCHIVE","receive");c("MediaEffectHubDispatcher").dispatch({type:"effects_edited",payload:{effects:t}});c("MediaEffectHubDispatcher").dispatch({type:"effects_selected",payload:{effectIDs:i()}});u&&u()}).setErrorHandler(function(x){c("AsyncResponse").defaultErrorHandler(x);v&&v()}).send()}var l={getLabel:function t(){return h._("Activar")},onClick:j.bind(null,true)},m={getLabel:function t(){return h._("Desactivar")},onClick:j.bind(null,false)},n={getLabel:function t(){return h._("Editar")},onClick:function t(u){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_OPEN","menu-edit");var v=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").BASIC_HUB).setEnum("step",c("MediaEffectCreateStep").EDIT).setFBID("media_effect_id",u.id).setEnum("ref",c("MediaEffectCreationReferrer").HUB).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(v))}},o={getLabel:function t(){return h._("Duplicar")},onClick:function t(u){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_DUPLICATE");var v=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").BASIC_HUB).setEnum("step",c("MediaEffectCreateStep").DUPLICATE).setFBID("media_effect_id",u.id).setEnum("ref",c("MediaEffectCreationReferrer").HUB).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(v))}},p={getLabel:function t(){return h._("Archivar")},onClick:function t(u,v,w){return c("SimpleXUIDialog").showEx(h._("Una vez que archives un marco, dejar\u00e1 de estar disponible para que las personas lo usen. No podr\u00e1s volver a activarlo de nuevo."),h._({"*":"\u00bfArchivar marcos?","_1":"\u00bfArchivar marco?"},[h.plural(u.size)]),c("React").createElement("div",null,c("React").createElement(c("XUIDialogCancelButton.react"),{action:"cancel"}),c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",label:h._("Archivar"),onClick:function t(){return k(u,v,w)},use:"confirm"})))}},q={getLabel:function t(){return h._("Agregar a foto del perfil")},onClick:function t(u){c("MediaEffectHubFunnelLogger").logActionWithTag("HUB_EFFECT_CHANGE_PROFILE_PICTURE");var v=u.profileFrame&&u.profileFrame.id;if(v){var w=c("XProfilePictureOverlayLandingController").getURIBuilder().setInt("selected_overlay_id",v).setInt("profile_id",u.owner.id).getURI();c("goURI")(w)}}},r={getLabel:function t(){return h._("Vista previa en el celular")},onClick:function t(u){var v=c("XMediaEffectAsyncRequestEffectNotificationController").getURIBuilder().setFBID("effect_id",u).getURI();new(c("AsyncRequest"))(v).setHandler(function(w){c("SimpleXUIDialog").show(h._("Comprueba la notificaci\u00f3n en el celular para obtener una vista previa del marco."))}).setErrorHandler(function(w){c("SimpleXUIDialog").show(h._("Se produjo un error al enviar la notificaci\u00f3n."))}).send()}},s={getLabel:function t(){return h._("Compartir como p\u00e1gina")},onClick:function t(u){var v=c("XMediaEffectShareEffectDialogController").getURIBuilder().setFBID("page_id",u.owner.id.toString()).setFBID("effect_id",u.id.toString()).setEnum("ref",c("MediaEffectShareReferrer").HUB_EFFECT_PREVIEW).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(v))}};f.exports={activate:l,archive:p,changeActiveStatus:j,changeProfilePicture:q,deactivate:m,duplicate:o,edit:n,previewOnMobile:r,shareEffect:s}}),null);
__d("MediaEffectStatusIndicator.react",["cx","fbt","AsyncDialog","AsyncRequest","FXEntMediaEffectStatus","Link.react","MediaEffectAnalyticsStats.react","MediaEffectCreateStep","MediaEffectCreationReferrer","MediaEffectFlowType","MediaEffectHubStrings","React","SUIText.react","XMediaEffectCreateDialogController","XUIButton.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogTitle.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;function l(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MediaEffectStatusIndicator1=function(event){event.preventDefault();var s=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",c("MediaEffectFlowType").BASIC_HUB).setEnum("step",c("MediaEffectCreateStep").EDIT).setFBID("media_effect_id",this.props.mediaEffect.id).setEnum("ref",c("MediaEffectCreationReferrer").HUB).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(s))}.bind(this),o}l.prototype.render=function(){var n=this.props.mediaEffect,o=m(n.id),p=n.errors&&n.errors.length>0?c("React").createElement("span",{className:"_2pck"},c("MediaEffectHubStrings").getNeedsAttention()):c("MediaEffectHubStrings").getTextForStatus(n.status),q=void 0,r=void 0,s=void 0,t=null,u=null;switch(n.status){case c("FXEntMediaEffectStatus").ACTIVE:q="_2l7j";break;case c("FXEntMediaEffectStatus").ARCHIVED:q="_2l7k";break;case c("FXEntMediaEffectStatus").COMPLETED:q="_2l7n";break;case c("FXEntMediaEffectStatus").DRAFT:q="_2l85";break;case c("FXEntMediaEffectStatus").INACTIVE:q="_2l86";break;case c("FXEntMediaEffectStatus").IN_REVIEW:q="_2l87";break;case c("FXEntMediaEffectStatus").SCHEDULED:q="_2l88";break;case c("FXEntMediaEffectStatus").NOT_APPROVED:q="_2l89";break;case c("FXEntMediaEffectStatus").NEEDS_ATTENTION:q="_2pck";if(n.needsAttentionReason==="will_deprecate_soon")u={title:i._("Tu efecto est\u00e1 desactualizado"),text:i._("Este efecto se cre\u00f3 con una versi\u00f3n antigua de AR Studio que pronto quedar\u00e1 obsoleta. Actualiza AR Studio a la versi\u00f3n m\u00e1s reciente y vuelve a enviar el efecto.")};break;case c("FXEntMediaEffectStatus").DEPRECATED:q="_fd8";u={title:i._("Es necesario actualizar tu efecto"),text:i._("Este efecto se cre\u00f3 con una versi\u00f3n de AR Studio que qued\u00f3 obsoleta. Actualiza AR Studio a la versi\u00f3n m\u00e1s reciente y vuelve a enviar el efecto para que aparezca de nuevo en la c\u00e1mara.")};break}var v=null;if(u)v=c("React").createElement(c("XUIContextualDialog.react"),{autoFocus:false,contextRef:function w(){return t},hoverContextRef:function w(){return t},width:260},c("React").createElement(c("XUIContextualDialogTitle.react"),null,u.title),c("React").createElement(c("XUIContextualDialogBody.react"),null,c("React").createElement("div",{className:"_1fw7"},u.text),c("React").createElement("div",{className:"_61ud"},c("React").createElement(c("XUIButton.react"),{href:o,label:i._("Actualizar efecto"),onClick:this.$MediaEffectStatusIndicator1,use:"confirm"}))));if(n.rejectedReasons&&n.rejectedReasons.length>0){r=n.rejectedReasons[0].trim();s=n.rejectedReasons.length>1?i._({"*":"+{number} motivos m\u00e1s","_1":"+1 motivo m\u00e1s"},[i.plural(n.rejectedReasons.length-1,"number")]):null;p=c("React").createElement(c("Link.react"),{href:o,onClick:this.$MediaEffectStatusIndicator1},p)}return c("React").createElement("div",{className:"_2l7i"+(this.props.showOneLine?" _oer":""),style:{width:this.props.width}},c("React").createElement("div",{ref:function w(x){return t=x}},c("React").createElement("span",{className:c("joinClasses")(q,"_3-8_"+(n.status!==c("FXEntMediaEffectStatus").ARCHIVED?" _2l7h":""))}),p),v,this.props.showReasons?this.props.showOneLine?c("React").createElement(c("SUIText.react"),{className:"_3-99",display:"truncate",shade:"light"},r," ",s):c("React").createElement("div",{className:"_28gq"},c("React").createElement("div",null,r),s):null,this.props.showOneLine&&n.status!==c("FXEntMediaEffectStatus").NOT_APPROVED&&n.activateCount>0?c("React").createElement(c("MediaEffectAnalyticsStats.react"),{count:n.activateCount,label:i._({"*":"Usos","_1":"Uso"},[i.plural(n.activateCount)])}):null)};l.defaultProps={showReasons:true};function m(n){if(document.location.hash)return document.location.hash+"&effect_id="+n;else return"#effect_id="+n}f.exports=l}),null);
__d("MediaEffectGenerationType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({AUTO_GENERATED:"auto_generated",USER_GENERATED:"user_generated"})}),null);
__d("MediaEffectOwnerHubEffectCard.react",["cx","fbt","AsyncDialog","AsyncRequest","ContextualDialogArrow","ContextualLayerAutoFlip","FXEntMediaEffectStatus","Layout.react","List.react","MediaEffectMetadataActionCreators","Link.react","Log","MediaEffectCreateStep","MediaEffectHubViewTab","MediaEffectOwnerHubHeader.react","MediaEffectReactFrameEditorPreviewCanvasContainer.react","MediaEffectStatusIndicator.react","PopoverMenu.react","React","ReactXUIMenu","XMediaEffectCreateDialogController","XUICard.react","XUICardSection.react","XUIText.react","MediaEffectCreationReferrer"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k,l=c("Layout.react").Column,m=c("Layout.react").FillColumn,n=c("ReactXUIMenu").Item,o="archive",p="toggle";j=babelHelpers.inherits(q,c("React").PureComponent);k=j&&j.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.onEffectLinkClick=function(){var w=c("XMediaEffectCreateDialogController").getURIBuilder().setEnum("flow_type",this.props.flowType).setEnum("step",c("MediaEffectCreateStep").EDIT).setFBID("media_effect_id",this.props.effectID).setEnum("ref",c("MediaEffectCreationReferrer").HUB).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(w),function(x){x.subscribe(["hide","success"],function(y,event){this.props.effectUpdateHandler(this.props.effectID)}.bind(this))}.bind(this))}.bind(this),this.onMenuItemClick=function(event,w){var x=w.item.getValue();switch(x){case p:if(this.isToggleEnabled())this.props.toggleEventHandler(this.props.effectID,this.props.effect.effectData.status===c("FXEntMediaEffectStatus").INACTIVE);break;case o:this.props.archiveEventHandler(this.props.effect.effectData);break;default:c("Log").warn("Unexpected action sent to this handler: "+x)}}.bind(this),s}q.prototype.componentWillMount=function(){c("MediaEffectMetadataActionCreators").initFrameData(this.props.effect.effectEditorData)};q.prototype.buildMenu=function(){var r=this.props.effect.effectData.status,s=r===c("FXEntMediaEffectStatus").INACTIVE?i._("Activar"):i._("Desactivar"),t=this.isToggleEnabled();return c("React").createElement(c("ReactXUIMenu"),{onItemClick:this.onMenuItemClick},c("React").createElement(n,{value:p},c("React").createElement("span",{className:(t?"_2ugo":"")+(!t?" _2ugp":"")},s)),c("React").createElement(n,{value:o},i._("Archivar")))};q.prototype.isToggleEnabled=function(){var r=this.props.effect.effectData.status;return r===c("FXEntMediaEffectStatus").INACTIVE||r===c("FXEntMediaEffectStatus").ACTIVE};q.prototype.render=function(){return c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{hubLinkTab:c("MediaEffectHubViewTab").MANAGE,title:this.props.title}),c("React").createElement(c("XUICardSection.react"),null,c("React").createElement(c("Layout.react"),{className:"_2ugq"},c("React").createElement(l,null,c("React").createElement(c("MediaEffectReactFrameEditorPreviewCanvasContainer.react"),{previewHeight:80,previewWidth:80})),c("React").createElement(m,{className:"_2ugr"},c("React").createElement(c("List.react"),{border:"none",spacing:"small"},c("React").createElement("li",null,c("React").createElement(c("Link.react"),{href:"#",onClick:this.onEffectLinkClick},c("React").createElement(c("XUIText.react"),null,this.props.effect.effectData.name))),c("React").createElement("li",null,c("React").createElement(c("MediaEffectStatusIndicator.react"),{className:"_2ugs",mediaEffect:this.props.effect.effectData})),c("React").createElement("li",null,c("React").createElement(c("XUIText.react"),null,i._({"*":{"*":"{activateCount} usos","_1":"{activateCount} uso"}},[i.param("activateCount",this.props.effect.effectData.activateCount,[0]),i.plural(this.props.effect.effectData.activateCount)]))))),c("React").createElement(l,{className:"_2ugt"},c("React").createElement(c("PopoverMenu.react"),{alignh:"right",behaviors:[c("ContextualDialogArrow")],layerBehaviors:[c("ContextualLayerAutoFlip")],menu:this.buildMenu(),position:"below"},c("React").createElement("div",{className:"_2ugu"}))))))};f.exports=q}),null);
__d("MediaEffectOwnerHubNullStateCard.react",["cx","invariant","EventPermalinkCameraFramesCreate.react","EventPermalinkCameraFramesCreateWithDefaultFrame.react","MediaEffectFlowType","MediaEffectGenerationType","MediaEffectOwnerHubHeader.react","React","XUICard.react","XUICardSection.react","idx"],(function a(b,c,d,e,f,g,h,i){"use strict";var j,k;j=babelHelpers.inherits(l,c("React").PureComponent);k=j&&j.prototype;l.prototype.render=function(){var m;switch(this.props.flowType){case c("MediaEffectFlowType").EVENT:var n=(m=this.props)!=null?(m=m.optionalData)!=null?m.eventActionContext:m:m;n||i(0);var o=this.props.effect;if(o&&o.effectData&&o.effectData.generationType===c("MediaEffectGenerationType").AUTO_GENERATED)return c("React").createElement(c("EventPermalinkCameraFramesCreateWithDefaultFrame.react"),{actionContext:n,effect:o,effectUpdateHandler:this.props.effectUpdateHandler,eventID:this.props.owner,flowType:this.props.flowType,key:"EffectCard"+o.effectData.id,title:this.props.title,toggleEventHandler:this.props.toggleEventHandler});else return c("React").createElement(c("EventPermalinkCameraFramesCreate.react"),{actionContext:n,eventID:this.props.owner,title:this.props.title});default:return c("React").createElement(c("XUICard.react"),{className:"_634s"},c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),c("React").createElement(c("XUICardSection.react"),null,c("React").createElement("div",{className:"_fw6"},"No data!")))}};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("MediaEffectStoreSharedDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("XMediaEffectAsyncFetchEffectController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/async_load_effect/",{effect_ids:{type:"FBIDSet"}})}),null);
__d("MediaEffectStore",["AsyncRequest","FluxLoadObjectStore","LoadObject","MediaEffectGenerationType","MediaEffectStoreSharedDispatcher","XMediaEffectAsyncFetchEffectController","idx"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("FluxLoadObjectStore"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);k.explicitlyRegisterStore(this)}j.prototype.reduce=function(k,l){switch(l.action){case"media_effect/add":return this.__handleOne(k,l.key,l.value);case"media_effect_saved":var m=k.filter(function(p,q){var r,s=p.getValue();return((r=s)!=null?(r=r.effectData)!=null?r.generationType:r:r)===c("MediaEffectGenerationType").USER_GENERATED});return this.__handleOne(m,l.effect.effectData.id,l.effect);case"media_effect/bootstrap":l.bootstrapData.forEach(function(p){k.set(p.effect,c("LoadObject").withValue(p.data))});break;case"media_effect/error":return this.__handleOne(k,l.key,l.error);case"media_effect/reload":this.__load(l.key);return k.remove(l.key);case"media_effect/remove":return k.remove(l.key);case"media_effect/update_effect":var n=k.get(l.key).getValue();if(n){var o=Object.assign({},n);o.effectData=l.effectData;return this.__handleOne(k.remove(l.key),l.key,o)}break}return k};j.prototype.__load=function(k){var l=c("XMediaEffectAsyncFetchEffectController").getURIBuilder().setFBIDSet("effect_ids",[k]).getURI();new(c("AsyncRequest"))(l).setHandler(function(m){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/add",key:k,value:m.getPayload().effects[0]})}).setErrorHandler(function(m){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/error",key:k,error:m.getError()})}).send()};f.exports=new j(c("MediaEffectStoreSharedDispatcher"))}),null);
__d("XMediaEffectAsyncFetchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/fbcameraeffects/async_load/",{owner_ids:{type:"FBIDSet"},creator_ids:{type:"FBIDSet"},statuses:{type:"EnumSet",enumType:null},types:{type:"EnumSet",enumType:null},creation_date_range:{type:"StringToIntMap"},effect_id:{type:"FBID"},effect_name:{type:"String"},effect_tag:{type:"String"},whitelisted:{type:"Bool",defaultValue:false},gatekeeper:{type:"String"}})}),null);
__d("MediaEffectOwnerStore",["AsyncRequest","FluxLoadObjectStore","FXEntMediaEffectStatus","LoadObject","MediaEffectStore","MediaEffectStoreSharedDispatcher","XMediaEffectAsyncFetchController"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=[c("FXEntMediaEffectStatus").ACTIVE,c("FXEntMediaEffectStatus").COMPLETED,c("FXEntMediaEffectStatus").DRAFT,c("FXEntMediaEffectStatus").IN_REVIEW,c("FXEntMediaEffectStatus").INACTIVE,c("FXEntMediaEffectStatus").NOT_APPROVED,c("FXEntMediaEffectStatus").SCHEDULED];h=babelHelpers.inherits(k,c("FluxLoadObjectStore"));i=h&&h.prototype;function k(l){i.constructor.call(this,l);l.explicitlyRegisterStore(this)}k.prototype.reduce=function(l,m){switch(m.action){case"media_effect_owner/add":return this.__handleOne(l,m.key,{ownerID:m.key,effects:m.effects});case"media_effect_owner/bootstrap":m.bootstrapData.forEach(function(s){l.set(s.ownerID,c("LoadObject").withValue(s))});break;case"media_effect_owner/error":return this.__handleOne(l,m.key,m.error);case"media_effect_owner/reload":this.__load(m.key);return l.remove(m.key);case"media_effect_owner/remove":return l.remove(m.key);case"media_effect_owner/update_add_effect":var n=l.get(m.key).getValue();if(n){n.effects.push(m.effect);return this.__handleOne(l,m.key,{ownerID:m.key,effects:n.effects})}break;case"media_effect_saved":var o=m.effect.effectData.owner.id,p=l.get(o).getValue();if(p){this.$MediaEffectOwnerStore1();return this.__handleOne(l,o,{ownerID:o,effects:c("MediaEffectStore").getState().keySeq().toArray()})}break;case"media_effect_owner/update_remove_effect":var q=l.get(m.key).getValue();if(q)if(q.effects.indexOf(m.effect)>=0){var r=q.effects;r.splice(r.indexOf(m.effect),1);return this.__handleOne(l,m.key,{ownerID:m.key,effects:r})}break}return l};k.prototype.$MediaEffectOwnerStore1=function(){c("MediaEffectStoreSharedDispatcher").waitFor([c("MediaEffectStore").getDispatchToken()])};k.prototype.__load=function(l){var m=c("XMediaEffectAsyncFetchController").getURIBuilder().setFBIDSet("owner_ids",[l]).setEnumSet("statuses",j).getURI();new(c("AsyncRequest"))(m).setHandler(function(n){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/add",key:l,effects:n.payload.effects.map(function(o){return o.id})})}).setErrorHandler(function(n){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/error",key:l,error:n.getError()})}).send()};f.exports=new k(c("MediaEffectStoreSharedDispatcher"))}),null);
__d("MediaEffectStoresBootstrapper",["MediaEffectFrameEditorDispatcher","MediaEffectMetadataActionCreators","MediaEffectOwnerStore","MediaEffectReactFrameEditorCanvasDataStore","MediaEffectReactFrameEditorDataStore","MediaEffectStore","MediaEffectStoreSharedDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h=[c("MediaEffectReactFrameEditorDataStore"),c("MediaEffectReactFrameEditorCanvasDataStore")],i=[c("MediaEffectStore"),c("MediaEffectOwnerStore")],j={isBootstrapped:false,getEditorStores:function k(){return h},getMediaEffectStores:function k(){return i},bootstrap:function k(){if(this.isBootstrapped)return;c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.getEditorStores());c("MediaEffectStoreSharedDispatcher").explicitlyRegisterStores(this.getMediaEffectStores());this.bootstrapFontData();this.isBootstrapped=true},bootstrapWithData:function k(l){if(this.isBootstrapped)return;c("MediaEffectFrameEditorDispatcher").explicitlyRegisterStores(this.getEditorStores());c("MediaEffectStoreSharedDispatcher").explicitlyRegisterStores(this.getMediaEffectStores());if(l.fontData)c("MediaEffectMetadataActionCreators").addFontData(l.fontData);else this.bootstrapFontData();if(l.ownerData)c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/bootstrap",bootstrapData:l.ownerData});if(l.effectData)c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/bootstrap",bootstrapData:l.effectData});this.isBootstrapped=true},bootstrapFontData:function k(){c("MediaEffectMetadataActionCreators").bootstrapFontData()}};f.exports=j}),null);
__d("MediaEffectOwnerHubContainer.react",["cx","AsyncRequest","AsyncResponse","CenteredContainer.react","FluxContainer","immutable","MediaEffectFlowType","MediaEffectGenerationType","MediaEffectHubEffectActionConfig","MediaEffectOwnerHubEffectCard.react","MediaEffectOwnerHubHeader.react","MediaEffectOwnerHubNullStateCard.react","MediaEffectOwnerStore","MediaEffectStore","MediaEffectStoresBootstrapper","MediaEffectStoreSharedDispatcher","React","XMediaEffectHubEffectActivationAsyncController","XUICard.react","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n,o=c("immutable").Set;i=babelHelpers.inherits(p,c("React").PureComponent);j=i&&i.prototype;p.prototype.render=function(){return c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("CenteredContainer.react"),{className:"_60ll"},c("React").createElement(c("XUISpinner.react"),{size:"large"}))))};function p(){i.apply(this,arguments)}k=babelHelpers.inherits(q,c("React").PureComponent);l=k&&k.prototype;q.prototype.render=function(){return c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("MediaEffectOwnerHubHeader.react"),{title:this.props.title}),c("React").createElement(c("XUICard.react"),null,c("React").createElement("div",{className:"_5-nb"},this.props.errorMessage)))};function q(){k.apply(this,arguments)}m=babelHelpers.inherits(r,c("React").PureComponent);n=m&&m.prototype;r.getStores=function(){return[c("MediaEffectStore"),c("MediaEffectOwnerStore")]};r.calculateState=function(s){var t={isLoading:true};if(!s)return t;var u=c("MediaEffectOwnerStore").get(s.ownerID);if(u.hasError()){var v=u.getError();if(v)t={errorMessage:v.message,isError:true,isLoading:false}}if(!u.hasValue())return t;var w=s.defaultFlowType,x=u.getValueEnforcing().effects;if(x.length===0)t={effectData:null,effectIDs:[],flowType:w,isError:false,isLoading:false,selectedEffectIndex:-1};else{var y=s.selectedEffectIndex<x.length&&s.selectedEffectIndex>=0?s.selectedEffectIndex:0,z=c("MediaEffectStore").get(x[y]);if(z.hasError()){var A=z.getError();if(A)t={errorMessage:A.message,isError:true,isLoading:false}}else if(z.hasValue()){var B=z.getValueEnforcing();w=B.effectData.flowType;t={effectData:B,effectIDs:x,flowType:w,isError:false,isLoading:false,selectedEffectIndex:y}}else t={isLoading:true}}return t};function r(s){n.constructor.call(this,s);this.effectUpdateHandler=function(v){var w=this.state.effectIDs.length>0&&this.state.selectedEffectIndex>=0?this.state.effectIDs[this.state.selectedEffectIndex]:"";if(v===w)this.setState({isLoading:true});c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/reload",key:v})}.bind(this);this.toggleEventHandler=function(v,w){var x=c("XMediaEffectHubEffectActivationAsyncController").getURIBuilder().setBool("activate",w).setFBIDVector("effect_ids",[v]).getURI();new(c("AsyncRequest"))().setURI(x).setHandler(function(y){var z=y.getPayload().effects;z.map(function(A){c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect/update_effect",key:A.id,effectData:A})})}).setErrorHandler(function(y){c("AsyncResponse").defaultErrorHandler(y)}).send()};this.archiveEventHandler=function(v){c("MediaEffectHubEffectActionConfig").archive.onClick(o([v]),function(){this.setState({isLoading:true});c("MediaEffectStoreSharedDispatcher").dispatch({action:"media_effect_owner/update_remove_effect",key:this.state.ownerID,effect:v.id})}.bind(this))}.bind(this);var t={defaultFlowType:s.flowType?s.flowType:c("MediaEffectFlowType").BASIC_HUB,effectData:null,effectIDs:[],errorMessage:"",flowType:s.flowType?s.flowType:c("MediaEffectFlowType").BASIC_HUB,isError:false,isLoading:true,ownerID:s.owner,selectedEffectIndex:-1},u=r.calculateState(t);this.state=Object.assign({},t,u)}r.prototype.componentWillMount=function(){c("MediaEffectStoresBootstrapper").bootstrap()};r.prototype.render=function(){var s=this.props,t=s.title,u=s.optionalData,v=this.state,w=v.effectData,x=v.effectIDs,y=v.errorMessage,z=v.flowType,A=v.isError,B=v.isLoading,C=v.ownerID;if(A)return c("React").createElement(q,{errorMessage:y,title:t});else if(B)return c("React").createElement(p,{title:t});else if(x.length>0&&w&&w.effectData.generationType===c("MediaEffectGenerationType").USER_GENERATED){var D=w;return c("React").createElement(c("MediaEffectOwnerHubEffectCard.react"),{archiveEventHandler:this.archiveEventHandler,effect:D,effectID:D.effectData.id,effectUpdateHandler:this.effectUpdateHandler,flowType:z,key:"EffectCard"+D.effectData.id,title:t,toggleEventHandler:this.toggleEventHandler})}else return c("React").createElement(c("MediaEffectOwnerHubNullStateCard.react"),{effect:w,effectUpdateHandler:this.effectUpdateHandler,flowType:z,optionalData:u,owner:C,title:t,toggleEventHandler:this.toggleEventHandler})};f.exports=c("FluxContainer").create(r)}),null);
__d("MediaEffectOwnerHubWidgetInit",["MediaEffectOwnerHubContainer.react","MediaEffectStoresBootstrapper","React","ReactRenderer"],(function a(b,c,d,e,f,g){"use strict";var h={init:function i(j){if(j.bootstrapData)c("MediaEffectStoresBootstrapper").bootstrapWithData(j.bootstrapData);else c("MediaEffectStoresBootstrapper").bootstrap();c("ReactRenderer").renderComponent(c("React").createElement(c("MediaEffectOwnerHubContainer.react"),j.ownerWidgetProps),j.root)}};f.exports=h}),null);